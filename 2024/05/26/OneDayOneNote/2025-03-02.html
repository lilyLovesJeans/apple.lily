<hr>
<h2 id="title-2025-03-02-Vue-ä¸­å¦‚ä½•-çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾-Blob-URL-è³‡æºdate-2025-09-06-22-54-44tags-Javascript-Vue-description-2025-03-02-Vue-ä¸­å¦‚ä½•-çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾-Blob-URL-è³‡æº"><a href="#title-2025-03-02-Vue-ä¸­å¦‚ä½•-çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾-Blob-URL-è³‡æºdate-2025-09-06-22-54-44tags-Javascript-Vue-description-2025-03-02-Vue-ä¸­å¦‚ä½•-çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾-Blob-URL-è³‡æº" class="headerlink" title="title: 2025-03-02-Vue ä¸­å¦‚ä½• **çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ Blob URL è³‡æºdate: 2025-09-06 22:54:44tags:  [Javascript,Vue]description:   2025-03-02-Vue ä¸­å¦‚ä½• **çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ Blob URL è³‡æº"></a>title: 2025-03-02-Vue ä¸­å¦‚ä½• **çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ Blob URL è³‡æº<br>date: 2025-09-06 22:54:44<br>tags:  [Javascript,Vue]<br>description:   2025-03-02-Vue ä¸­å¦‚ä½• **çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ Blob URL è³‡æº</h2><h1 id="2025-03-02-Vue-ä¸­å¦‚ä½•-çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾-Blob-URL-è³‡æº"><a href="#2025-03-02-Vue-ä¸­å¦‚ä½•-çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾-Blob-URL-è³‡æº" class="headerlink" title="2025-03-02-Vue ä¸­å¦‚ä½• **çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ Blob URL è³‡æº"></a>2025-03-02-Vue ä¸­å¦‚ä½• **çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ Blob URL è³‡æº</h1><p>ä¸€æ­¥æ­¥äº†è§£åœ¨ Vue ä¸­å¦‚ä½• <strong>çµ±ä¸€ç®¡ç†ä¸¦é‡‹æ”¾ <code>Blob</code> URL è³‡æº</strong>ï¼Œé€™æ¨£ä½ çš„æ‡‰ç”¨ç¨‹å¼æœƒæ›´ç©©å®šã€ä¸æœƒè¨˜æ†¶é«”æ³„æ¼ ğŸ’ª</p>
<hr>
<h2 id="ğŸ¯-ç›®æ¨™"><a href="#ğŸ¯-ç›®æ¨™" class="headerlink" title="ğŸ¯ ç›®æ¨™"></a>ğŸ¯ ç›®æ¨™</h2><p>ç•¶æˆ‘å€‘åœ¨ Vue ä¸­ç”¨ <code>URL.createObjectURL()</code> å»ºç«‹äº†ä¸‹è¼‰é€£çµï¼Œè¦è¨˜å¾—ï¼š</p>
<ul>
<li>âš ï¸ æ¯æ¬¡éƒ½ <strong>è¨˜éŒ„å»ºç«‹çš„ URL</strong></li>
<li>ğŸ§¹ åœ¨ä¸éœ€è¦æ™‚ <strong>é‡‹æ”¾è¨˜æ†¶é«”</strong></li>
</ul>
<hr>
<h2 id="âœ…-ä½œæ³•ä¸€ï¼šä½¿ç”¨-onUnmounted-æ¸…ç†è³‡æº"><a href="#âœ…-ä½œæ³•ä¸€ï¼šä½¿ç”¨-onUnmounted-æ¸…ç†è³‡æº" class="headerlink" title="âœ… ä½œæ³•ä¸€ï¼šä½¿ç”¨ onUnmounted() æ¸…ç†è³‡æº"></a>âœ… ä½œæ³•ä¸€ï¼šä½¿ç”¨ <code>onUnmounted()</code> æ¸…ç†è³‡æº</h2><p>Vue æä¾›çš„ <code>onUnmounted()</code> lifecycle hookï¼Œå¯ä»¥åœ¨å…ƒä»¶è¢«ç§»é™¤æ™‚æ¸…ç†è³‡æºï¼</p>
<hr>
<h3 id="âœ…-ç¯„ä¾‹ï¼šä¸‹è¼‰-JSON-ä¸¦ç¢ºä¿é‡‹æ”¾è¨˜æ†¶é«”"><a href="#âœ…-ç¯„ä¾‹ï¼šä¸‹è¼‰-JSON-ä¸¦ç¢ºä¿é‡‹æ”¾è¨˜æ†¶é«”" class="headerlink" title="âœ… ç¯„ä¾‹ï¼šä¸‹è¼‰ JSON ä¸¦ç¢ºä¿é‡‹æ”¾è¨˜æ†¶é«”"></a>âœ… ç¯„ä¾‹ï¼šä¸‹è¼‰ JSON ä¸¦ç¢ºä¿é‡‹æ”¾è¨˜æ†¶é«”</h3><pre><code class="vue">&lt;script setup&gt;
import { ref, onUnmounted } from &#39;vue&#39;

const apiKey = &#39;ä½ çš„API&#39;
const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${apiKey}`

// è¨˜éŒ„ blob URL
const blobUrl = ref(null)

const downloadWeatherJSON = async () =&gt; {
  try {
    const response = await fetch(url)
    const data = await response.json()
    const json = JSON.stringify(data)

    // å»ºç«‹ Blob ä¸¦ç”¢ç”Ÿ URL
    const blob = new Blob([json], { type: &#39;application/json&#39; })
    blobUrl.value = URL.createObjectURL(blob)

    const a = document.createElement(&#39;a&#39;)
    a.href = blobUrl.value
    a.download = &#39;weather_data.json&#39;
    a.click()
  } catch (error) {
    console.error(&#39;âŒ ç™¼ç”ŸéŒ¯èª¤:&#39;, error)
  }
}

// ğŸ” æ¸…ç†è³‡æº
onUnmounted(() =&gt; {
  if (blobUrl.value) {
    URL.revokeObjectURL(blobUrl.value)
    console.log(&#39;ğŸ§¹ å·²é‡‹æ”¾ Blob URL è¨˜æ†¶é«”&#39;)
  }
})
&lt;/script&gt;

&lt;template&gt;
  &lt;button @click=&quot;downloadWeatherJSON&quot;&gt;ä¸‹è¼‰å¤©æ°£ JSON&lt;/button&gt;
&lt;/template&gt;
</code></pre>
<hr>
<h2 id="ğŸ“Œ-ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ"><a href="#ğŸ“Œ-ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ" class="headerlink" title="ğŸ“Œ ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ"></a>ğŸ“Œ ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ</h2><table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td><code>ref(blobUrl)</code></td>
<td>è¦è¿½è¹¤ç›®å‰å»ºç«‹çš„ Blob URLï¼Œæ‰èƒ½è¨˜å¾—é‡‹æ”¾</td>
</tr>
<tr>
<td><code>onUnmounted()</code></td>
<td>ç•¶å…ƒä»¶è¢«å¸è¼‰æ™‚ï¼ˆä¾‹å¦‚æ›é ï¼‰ï¼Œå°±èƒ½æ¸…é™¤è¨˜æ†¶é«”</td>
</tr>
<tr>
<td><code>URL.revokeObjectURL(...)</code></td>
<td>ä¸»å‹•é‡‹æ”¾è³‡æºï¼Œé¿å…ä½”ç”¨è¨˜æ†¶é«”</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ’¡-å»¶ä¼¸æŠ€å·§ï¼šè‹¥æœ‰å¤šå€‹-blobï¼Œè¦æ¸…å¤šå€‹ï¼Ÿ"><a href="#ğŸ’¡-å»¶ä¼¸æŠ€å·§ï¼šè‹¥æœ‰å¤šå€‹-blobï¼Œè¦æ¸…å¤šå€‹ï¼Ÿ" class="headerlink" title="ğŸ’¡ å»¶ä¼¸æŠ€å·§ï¼šè‹¥æœ‰å¤šå€‹ blobï¼Œè¦æ¸…å¤šå€‹ï¼Ÿ"></a>ğŸ’¡ å»¶ä¼¸æŠ€å·§ï¼šè‹¥æœ‰å¤šå€‹ blobï¼Œè¦æ¸…å¤šå€‹ï¼Ÿ</h2><p>ä½ å¯ä»¥ç”¨é™£åˆ—ä¾†ç®¡ç†ï¼š</p>
<pre><code class="js">const blobUrls = ref([])

onUnmounted(() =&gt; {
  blobUrls.value.forEach(url =&gt; URL.revokeObjectURL(url))
})
</code></pre>
<hr>
<h2 id="âœ…-çµèª"><a href="#âœ…-çµèª" class="headerlink" title="âœ… çµèª"></a>âœ… çµèª</h2><p>é€™ç¨®åšæ³•å¯ä»¥å¹«åŠ©ä½ ï¼š</p>
<ul>
<li>å¯«å‡ºæ›´å¥å£¯çš„ Vue å…ƒä»¶</li>
<li>ç®¡ç†ã€Œç€è¦½å™¨è³‡æºã€ï¼ˆå¦‚ Blobã€éŸ³è¨Šã€å½±ç‰‡ç­‰ï¼‰</li>
<li>é¿å…è¨˜æ†¶é«”é•·æœŸä½”ç”¨ï¼Œæå‡æ•ˆèƒ½</li>
</ul>
<hr>

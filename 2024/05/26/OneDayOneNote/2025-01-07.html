<hr>
<h2 id="title-2025-01-07-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08date-2025-04-14-22-59-25categories-OneDayOneNotetags-Javascript-Vue-description-2025-01-07-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08"><a href="#title-2025-01-07-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08date-2025-04-14-22-59-25categories-OneDayOneNotetags-Javascript-Vue-description-2025-01-07-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08" class="headerlink" title="title: 2025-01-07 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08date: 2025-04-14 22:59:25categories: OneDayOneNotetags:  [Javascript,Vue]description:   2025-01-07 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08"></a>title: 2025-01-07 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08<br>date: 2025-04-14 22:59:25<br>categories: OneDayOneNote<br>tags:  [Javascript,Vue]<br>description:   2025-01-07 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08</h2><h2 id="2025-01-07-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08"><a href="#2025-01-07-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08" class="headerlink" title="2025-01-07 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08"></a>2025-01-07 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ08</h2><p>å¥½ï¼Œå›åˆ°æ¯”è¼ƒç°¡å–®çš„ç›®æ¨™ ğŸ‘‡<br>æˆ‘å€‘å…ˆå®Œæˆé€™å€‹åŠŸèƒ½ï¼š</p>
<p>ğŸ”§ <strong>åŠŸèƒ½ç›®æ¨™ï¼šé¡¯ç¤ºæ¯ä½æˆå“¡æ‡‰ä»˜çš„é‡‘é¡</strong>ï¼ˆå–ä»£ç¾åœ¨çš„ã€Œæ‡‰ä»˜ $0ã€ï¼‰</p>
<hr>
<h2 id="ğŸ§®-åˆ†å¸³è¨ˆç®—é‚è¼¯ç°¡åŒ–èªªæ˜"><a href="#ğŸ§®-åˆ†å¸³è¨ˆç®—é‚è¼¯ç°¡åŒ–èªªæ˜" class="headerlink" title="ğŸ§® åˆ†å¸³è¨ˆç®—é‚è¼¯ç°¡åŒ–èªªæ˜"></a>ğŸ§® åˆ†å¸³è¨ˆç®—é‚è¼¯ç°¡åŒ–èªªæ˜</h2><ol>
<li><strong>æ¯ç­†æ”¯å‡º</strong>æœƒç”±æŸä½æˆå“¡æ”¯ä»˜ä¸€ç­†é‡‘é¡ã€‚</li>
<li>æ‰€æœ‰æ”¯å‡ºç¸½é¡ï¼Œå¹³å‡åˆ†é…çµ¦æ‰€æœ‰äººã€‚</li>
<li>æ¯å€‹äººã€Œæ‡‰ä»˜ã€çš„é‡‘é¡ &#x3D; <strong>å¹³å‡é‡‘é¡ - ä»–å¯¦éš›æ”¯ä»˜çš„é‡‘é¡</strong></li>
<li>ã€Œæ‡‰ä»˜é‡‘é¡ã€ç‚ºæ­£ï¼Œä»£è¡¨ä»–é‚„è¦ä»˜çµ¦å…¶ä»–äººï¼›ç‚ºè² ä»£è¡¨ä»–å·²ç¶“ä»˜æ¯”è¼ƒå¤šã€‚</li>
</ol>
<hr>
<h2 id="âœ…-è¦åšçš„æ­¥é©Ÿ"><a href="#âœ…-è¦åšçš„æ­¥é©Ÿ" class="headerlink" title="âœ… è¦åšçš„æ­¥é©Ÿ"></a>âœ… è¦åšçš„æ­¥é©Ÿ</h2><ol>
<li>è¨ˆç®—æ‰€æœ‰äººå¹³å‡æ‡‰ä»˜çš„é‡‘é¡ã€‚</li>
<li>è¨ˆç®—æ¯å€‹äººå¯¦éš›æ”¯å‡ºçš„ç¸½é¡ã€‚</li>
<li>è¨ˆç®—æ¯å€‹äººçš„æ‡‰ä»˜é‡‘é¡ &#x3D; å¹³å‡ - å¯¦æ”¯ã€‚</li>
<li>é¡¯ç¤ºåœ¨ UI ä¸Š <code>{{ member.name }} &lt;span&gt;æ‡‰ä»˜ $xx&lt;/span&gt;</code></li>
</ol>
<hr>
<h2 id="ğŸ› ï¸-ä¿®æ”¹-script-setup-ä»£ç¢¼"><a href="#ğŸ› ï¸-ä¿®æ”¹-script-setup-ä»£ç¢¼" class="headerlink" title="ğŸ› ï¸ ä¿®æ”¹ script setup ä»£ç¢¼"></a>ğŸ› ï¸ ä¿®æ”¹ <code>script setup</code> ä»£ç¢¼</h2><p>åœ¨ <code>&lt;script setup&gt;</code> å€å¡Šä¸­åŠ ä¸Šé€™æ®µï¼š</p>
<pre><code class="js">// è¨ˆç®—æ¯äººæ‡‰ä»˜é‡‘é¡
import { computed } from &#39;vue&#39;

const memberOwedAmounts = computed(() =&gt; {
  const totalAmount = expenses.value.reduce((sum, e) =&gt; sum + e.amount, 0)
  const memberCount = members.value.length
  const avg = memberCount &gt; 0 ? totalAmount / memberCount : 0

  // å»ºç«‹ä¸€å€‹ { [name]: æ‡‰ä»˜é‡‘é¡ } çš„ç‰©ä»¶
  const actualPaidMap = {}
  members.value.forEach(m =&gt; actualPaidMap[m.name] = 0)

  expenses.value.forEach(e =&gt; {
    if (actualPaidMap[e.member] !== undefined) {
      actualPaidMap[e.member] += e.amount
    }
  })

  const result = {}
  for (const name in actualPaidMap) {
    result[name] = Math.round((avg - actualPaidMap[name]) * 100) / 100
  }

  return result
})
</code></pre>
<hr>
<h2 id="ğŸ‘ï¸â€ğŸ—¨ï¸-ä¿®æ”¹æ¨¡æ¿ä¸­çš„ã€Œæ‡‰ä»˜-0ã€"><a href="#ğŸ‘ï¸â€ğŸ—¨ï¸-ä¿®æ”¹æ¨¡æ¿ä¸­çš„ã€Œæ‡‰ä»˜-0ã€" class="headerlink" title="ğŸ‘ï¸â€ğŸ—¨ï¸ ä¿®æ”¹æ¨¡æ¿ä¸­çš„ã€Œæ‡‰ä»˜ $0ã€"></a>ğŸ‘ï¸â€ğŸ—¨ï¸ ä¿®æ”¹æ¨¡æ¿ä¸­çš„ã€Œæ‡‰ä»˜ $0ã€</h2><p>æ‰¾åˆ°é€™æ®µ HTMLï¼š</p>
<pre><code class="html">{{ member.name }} &lt;span class=&quot;owe&quot;&gt;æ‡‰ä»˜ $0&lt;/span&gt;
</code></pre>
<p>æ”¹ç‚ºï¼š</p>
<pre><code class="html">{{ member.name }} 
&lt;span class=&quot;owe&quot;&gt;æ‡‰ä»˜ ${{ memberOwedAmounts[member.name] ?? 0 }}&lt;/span&gt;
</code></pre>
<hr>
<h2 id="ğŸ§ª-æ¸¬è©¦æ–¹å¼"><a href="#ğŸ§ª-æ¸¬è©¦æ–¹å¼" class="headerlink" title="ğŸ§ª æ¸¬è©¦æ–¹å¼"></a>ğŸ§ª æ¸¬è©¦æ–¹å¼</h2><ol>
<li>æ–°å¢ä¸‰ä½æˆå“¡ï¼Œä¾‹å¦‚ Aã€Bã€Cã€‚</li>
<li>å‡è¨­ A æ”¯å‡º 300ã€‚</li>
<li>å¹³å‡æ¯äººè¦å‡º 100 â†’ A æ‡‰ä»˜ -200ï¼ˆå·²å¤šä»˜ï¼‰ï¼ŒB&#x2F;C æ‡‰ä»˜ 100ã€‚</li>
</ol>
<hr>
<p>è¦ä¸è¦ä¸‹ä¸€æ­¥å†å¹«ä½ æŠŠã€Œæ‡‰æ”¶ã€é¡¯ç¤ºç‚ºç¶ è‰²ã€ã€Œæ‡‰ä»˜ã€é¡¯ç¤ºç‚ºç´…è‰²ï¼Ÿé‚„æ˜¯ä½ æƒ³å…ˆé€™æ¨£ï¼Ÿ</p>
<p>ä½ å¯ä»¥é€™æ¨£ä¿®æ”¹ï¼š  </p>
<ol>
<li>åœ¨ <code>&lt;template&gt;</code> è£¡çš„ã€Œæ‡‰ä»˜ $0ã€å€å¡Šæ”¹ç‚ºå‹•æ…‹é¡¯ç¤ºã€Œæ‡‰æ”¶ &#x2F; æ‡‰ä»˜ã€  </li>
<li>æ ¹æ“šé‡‘é¡æ­£è² è®ŠåŒ– class ä¾†è®Šè‰²  </li>
<li>åœ¨ <code>&lt;style scoped&gt;</code> è£¡æ–°å¢ <code>.credit</code> å’Œ <code>.debt</code> æ¨£å¼</li>
</ol>
<hr>
<h3 id="âœ…-ä¿®æ”¹-ï¼ˆæˆå“¡æ¸…å–®é‚£é‚Šï¼‰"><a href="#âœ…-ä¿®æ”¹-ï¼ˆæˆå“¡æ¸…å–®é‚£é‚Šï¼‰" class="headerlink" title="âœ… ä¿®æ”¹ &lt;template&gt;ï¼ˆæˆå“¡æ¸…å–®é‚£é‚Šï¼‰"></a>âœ… ä¿®æ”¹ <code>&lt;template&gt;</code>ï¼ˆæˆå“¡æ¸…å–®é‚£é‚Šï¼‰</h3><p>æŠŠé€™æ®µï¼š</p>
<pre><code class="html">&lt;span class=&quot;owe&quot;&gt;æ‡‰ä»˜ $0&lt;/span&gt;
</code></pre>
<p>æ”¹æˆé€™æ®µï¼š</p>
<pre><code class="html">&lt;span :class=&quot;balanceClass(member.name)&quot;&gt;
  {{ balanceText(member.name) }}
&lt;/span&gt;
</code></pre>
<hr>
<h3 id="âœ…-åœ¨-è£¡æ–°å¢-balanceText-èˆ‡-balanceClassï¼š"><a href="#âœ…-åœ¨-è£¡æ–°å¢-balanceText-èˆ‡-balanceClassï¼š" class="headerlink" title="âœ… åœ¨ &lt;script setup&gt; è£¡æ–°å¢ balanceText èˆ‡ balanceClassï¼š"></a>âœ… åœ¨ <code>&lt;script setup&gt;</code> è£¡æ–°å¢ balanceText èˆ‡ balanceClassï¼š</h3><pre><code class="js">// è¨ˆç®—å€‹åˆ¥æˆå“¡çš„æ·¨æ”¯å‡ºé‡‘é¡
function getMemberBalance(name) {
  const paid = expenses.value
    .filter(e =&gt; e.member === name)
    .reduce((sum, e) =&gt; sum + e.amount, 0)

  const total = expenses.value.reduce((sum, e) =&gt; sum + e.amount, 0)
  const average = members.value.length &gt; 0 ? total / members.value.length : 0

  return paid - average
}

// å›å‚³æ–‡å­—æè¿°
function balanceText(name) {
  const balance = getMemberBalance(name)
  if (balance &gt; 0) return `æ‡‰æ”¶ $${balance.toFixed(2)}`
  if (balance &lt; 0) return `æ‡‰ä»˜ $${Math.abs(balance).toFixed(2)}`
  return &#39;çµæ¸…&#39;
}

// å›å‚³å°æ‡‰çš„ class
function balanceClass(name) {
  const balance = getMemberBalance(name)
  if (balance &gt; 0) return &#39;credit&#39;
  if (balance &lt; 0) return &#39;debt&#39;
  return &#39;&#39;
}
</code></pre>
<hr>
<h3 id="âœ…-åœ¨-è£¡æ–°å¢æ¨£å¼ï¼š"><a href="#âœ…-åœ¨-è£¡æ–°å¢æ¨£å¼ï¼š" class="headerlink" title="âœ… åœ¨ &lt;style scoped&gt; è£¡æ–°å¢æ¨£å¼ï¼š"></a>âœ… åœ¨ <code>&lt;style scoped&gt;</code> è£¡æ–°å¢æ¨£å¼ï¼š</h3><pre><code class="css">.credit {
  color: green;
  font-weight: bold;
}

.debt {
  color: red;
  font-weight: bold;
}
</code></pre>
<hr>
<p>é€™æ¨£å°±å¯ä»¥ä¾ç…§æ”¯å‡ºæƒ…æ³ï¼Œè®“æˆå“¡æ—é‚Šé¡¯ç¤ºã€Œæ‡‰æ”¶ $ã€ç‚ºç¶ è‰²ï¼Œã€Œæ‡‰ä»˜ $ã€ç‚ºç´…è‰²ï¼Œã€Œçµæ¸…ã€ä¸åŠ æ¨£å¼ã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›æˆ‘å¹«ä½ ä¸€èµ·æ•´åˆé€²æ•´ä»½ codeï¼Œæˆ‘ä¹Ÿå¯ä»¥å¹«ä½ è²¼ä¸Šå®Œæ•´ç‰ˆ ğŸ˜„<br>è¦å—ï¼Ÿ</p>

<hr>
<h2 id="title-2025-01-04-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06date-2025-04-14-22-55-39categories-OneDayOneNotetags-Javascript-Vue-description-2025-01-04-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"><a href="#title-2025-01-04-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06date-2025-04-14-22-55-39categories-OneDayOneNotetags-Javascript-Vue-description-2025-01-04-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06" class="headerlink" title="title: 2025-01-04 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06date: 2025-04-14 22:55:39categories: OneDayOneNotetags:  [Javascript,Vue]description:   2025-01-04 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"></a>title: 2025-01-04 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06<br>date: 2025-04-14 22:55:39<br>categories: OneDayOneNote<br>tags:  [Javascript,Vue]<br>description:   2025-01-04 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06</h2><h2 id="2025-01-04-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"><a href="#2025-01-04-æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06" class="headerlink" title="2025-01-04 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"></a>2025-01-04 æ—…è¡Œåˆ†å¸³æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06</h2><p>è³‡æ–™ã€Œå³æ™‚å„²å­˜åˆ° localStorageã€</p>
<p>å¤ªå¥½äº†ï¼Œæˆ‘ä¾†å¹«ä½ æŠŠè³‡æ–™ã€Œå³æ™‚å„²å­˜åˆ° localStorageã€çš„åŠŸèƒ½æ•´åˆé€²ä½ çš„ Vue æ‡‰ç”¨ç¨‹å¼ï¼Œé€™æ¨£å°±ç®—é‡æ–°æ•´ç†ç•«é¢ï¼Œè³‡æ–™ä¹Ÿä¸æœƒæ¶ˆå¤±ã€‚</p>
<hr>
<h3 id="âœ…-æˆ‘å€‘è¦å„²å­˜å“ªäº›è³‡æ–™ï¼Ÿ"><a href="#âœ…-æˆ‘å€‘è¦å„²å­˜å“ªäº›è³‡æ–™ï¼Ÿ" class="headerlink" title="âœ… æˆ‘å€‘è¦å„²å­˜å“ªäº›è³‡æ–™ï¼Ÿ"></a>âœ… æˆ‘å€‘è¦å„²å­˜å“ªäº›è³‡æ–™ï¼Ÿ</h3><ul>
<li>æˆå“¡è³‡æ–™ <code>members</code></li>
<li>æ”¯å‡ºè³‡æ–™ <code>expenses</code></li>
<li>é è¨­çš„æ”¯å‡ºé …ç›® <code>defaultExpenseItems</code></li>
</ul>
<hr>
<h3 id="ğŸ› -ä¿®æ”¹æ­¥é©Ÿ"><a href="#ğŸ› -ä¿®æ”¹æ­¥é©Ÿ" class="headerlink" title="ğŸ›  ä¿®æ”¹æ­¥é©Ÿ"></a>ğŸ›  ä¿®æ”¹æ­¥é©Ÿ</h3><ol>
<li><strong>åŠ å…¥ <code>watch</code> ç›£è½è®ŠåŒ– â†’ è‡ªå‹•å­˜å…¥ localStorage</strong></li>
<li><strong>åœ¨ <code>onMounted</code> æ™‚è‡ªå‹•å¾ localStorage è¼‰å…¥è³‡æ–™</strong></li>
</ol>
<hr>
<h3 id="âœ…-å®Œæ•´æ•´åˆç¯„ä¾‹ï¼ˆè«‹åŠ åœ¨-ä¸­ï¼‰"><a href="#âœ…-å®Œæ•´æ•´åˆç¯„ä¾‹ï¼ˆè«‹åŠ åœ¨-ä¸­ï¼‰" class="headerlink" title="âœ… å®Œæ•´æ•´åˆç¯„ä¾‹ï¼ˆè«‹åŠ åœ¨ &lt;script setup&gt; ä¸­ï¼‰"></a>âœ… å®Œæ•´æ•´åˆç¯„ä¾‹ï¼ˆè«‹åŠ åœ¨ <code>&lt;script setup&gt;</code> ä¸­ï¼‰</h3><pre><code class="js">import { ref, watch, onMounted } from &#39;vue&#39;

const members = ref([])
const expenses = ref([])
const defaultExpenseItems = ref([])

// å„²å­˜åˆ° localStorage çš„æ–¹æ³•
function saveToLocalStorage() {
  localStorage.setItem(&#39;splitBill_members&#39;, JSON.stringify(members.value))
  localStorage.setItem(&#39;splitBill_expenses&#39;, JSON.stringify(expenses.value))
  localStorage.setItem(&#39;splitBill_defaultItems&#39;, JSON.stringify(defaultExpenseItems.value))
}

// è¼‰å…¥ localStorage ä¸­çš„è³‡æ–™
function loadFromLocalStorage() {
  const savedMembers = localStorage.getItem(&#39;splitBill_members&#39;)
  const savedExpenses = localStorage.getItem(&#39;splitBill_expenses&#39;)
  const savedItems = localStorage.getItem(&#39;splitBill_defaultItems&#39;)

  if (savedMembers) members.value = JSON.parse(savedMembers)
  if (savedExpenses) expenses.value = JSON.parse(savedExpenses)
  if (savedItems) defaultExpenseItems.value = JSON.parse(savedItems)
}

// ç›£è½ membersã€expensesã€defaultExpenseItems æœ‰è®Šå‹•å°±å„²å­˜
watch([members, expenses, defaultExpenseItems], saveToLocalStorage, { deep: true })

// åˆå§‹åŒ–æ™‚è¼‰å…¥
onMounted(() =&gt; {
  loadFromLocalStorage()
})
</code></pre>
<hr>
<h3 id="ğŸ“Œ-æ³¨æ„"><a href="#ğŸ“Œ-æ³¨æ„" class="headerlink" title="ğŸ“Œ æ³¨æ„"></a>ğŸ“Œ æ³¨æ„</h3><ul>
<li><code>watch([...], ..., { deep: true })</code> æ˜¯ç‚ºäº†ç›£æ§é™£åˆ—æˆ–ç‰©ä»¶è£¡çš„è®ŠåŒ–ã€‚</li>
<li>key ååƒ <code>splitBill_members</code> å¯ä»¥ä¾ä½ çš„ App åç¨±è‡ªè¨‚ï¼Œé¿å…ä¸åŒ app çš„ key è¡çªã€‚</li>
</ul>
<hr>
<p>éœ€è¦æˆ‘å¹«ä½ æŠŠé€™æ®µç›´æ¥æ•´åˆåˆ°ç›®å‰çš„å®Œæ•´ç¨‹å¼ç¢¼è£¡å—ï¼Ÿé‚„æ˜¯ä½ æƒ³è©¦è©¦çœ‹åŠ é€²å»ï¼ŸğŸ‘©â€ğŸ’»</p>

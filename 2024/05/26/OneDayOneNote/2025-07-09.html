<hr>
<h2 id="title-2025-07-09-Line-è¨‚å–®ç³»çµ±-C-éšæ®µ-å®Œæ•´-env-ç¯„ä¾‹-db-init-sqldate-2025-11-12-23-26-53categories-OneDayOneNotetags-OneNote-Lineè¨‚å–®ç³»çµ±-description-2025-07-09-Line-è¨‚å–®ç³»çµ±-C-éšæ®µ-å®Œæ•´-env-ç¯„ä¾‹-db-init-sql"><a href="#title-2025-07-09-Line-è¨‚å–®ç³»çµ±-C-éšæ®µ-å®Œæ•´-env-ç¯„ä¾‹-db-init-sqldate-2025-11-12-23-26-53categories-OneDayOneNotetags-OneNote-Lineè¨‚å–®ç³»çµ±-description-2025-07-09-Line-è¨‚å–®ç³»çµ±-C-éšæ®µ-å®Œæ•´-env-ç¯„ä¾‹-db-init-sql" class="headerlink" title="title: 2025-07-09 Line è¨‚å–®ç³»çµ±-C éšæ®µ å®Œæ•´ .env ç¯„ä¾‹ + db_init.sqldate: 2025-11-12 23:26:53categories: OneDayOneNotetags:  [OneNote, Lineè¨‚å–®ç³»çµ±]description: 2025-07-09 Line è¨‚å–®ç³»çµ±-C éšæ®µ å®Œæ•´ .env ç¯„ä¾‹ + db_init.sql"></a>title: 2025-07-09 Line è¨‚å–®ç³»çµ±-C éšæ®µ å®Œæ•´ .env ç¯„ä¾‹ + db_init.sql<br>date: 2025-11-12 23:26:53<br>categories: OneDayOneNote<br>tags:  [OneNote, Lineè¨‚å–®ç³»çµ±]<br>description: 2025-07-09 Line è¨‚å–®ç³»çµ±-C éšæ®µ å®Œæ•´ .env ç¯„ä¾‹ + db_init.sql</h2><h2 id="2025-07-09-Line-è¨‚å–®ç³»çµ±-C-éšæ®µ-å®Œæ•´-env-ç¯„ä¾‹-db-init-sql"><a href="#2025-07-09-Line-è¨‚å–®ç³»çµ±-C-éšæ®µ-å®Œæ•´-env-ç¯„ä¾‹-db-init-sql" class="headerlink" title="2025-07-09 Line è¨‚å–®ç³»çµ±-C éšæ®µ å®Œæ•´ .env ç¯„ä¾‹ + db_init.sql"></a>2025-07-09 Line è¨‚å–®ç³»çµ±-C éšæ®µ å®Œæ•´ .env ç¯„ä¾‹ + db_init.sql</h2><p>æ—¢ç„¶æˆ‘å€‘å·²ç¶“å®Œæˆ Aï½C éšæ®µçš„è¨­è¨ˆï¼ˆWebhook â†’ API â†’ LINE æ•´åˆï¼‰ï¼Œ<br>é‚£æ¥ä¸‹ä¾†é€™ä»½æ˜¯æ•´å€‹ç³»çµ±å¿…å‚™çš„ã€Œç’°å¢ƒè®Šæ•¸è¨­å®šæª” <code>.env</code>ã€èˆ‡ã€Œåˆå§‹è³‡æ–™åº«å»ºæ§‹æª” <code>db_init.sql</code>ã€ã€‚</p>
<p>é€™å…©ä»½æª”æ¡ˆå°‡æˆç‚ºä½ çš„ Node.js + MySQL + Vue3 + LINE Bot ç³»çµ±çš„<strong>åŸºç¤æ ¸å¿ƒè¨­å®š</strong>ã€‚</p>
<hr>
<h1 id="ğŸ“¦-ä¸€ã€-env-ç¯„ä¾‹è¨­å®šæª”ï¼ˆå®Œæ•´è¨»è§£ï¼‰"><a href="#ğŸ“¦-ä¸€ã€-env-ç¯„ä¾‹è¨­å®šæª”ï¼ˆå®Œæ•´è¨»è§£ï¼‰" class="headerlink" title="ğŸ“¦ ä¸€ã€.env ç¯„ä¾‹è¨­å®šæª”ï¼ˆå®Œæ•´è¨»è§£ï¼‰"></a>ğŸ“¦ ä¸€ã€<code>.env</code> ç¯„ä¾‹è¨­å®šæª”ï¼ˆå®Œæ•´è¨»è§£ï¼‰</h1><blockquote>
<p>ğŸ“ æª”æ¡ˆä½ç½®ï¼š<code>/backend/.env</code></p>
</blockquote>
<pre><code class="bash"># ===============================
# ğŸŒ Server Configuration
# ===============================
NODE_ENV=development
PORT=3000                # Node.js ä¼ºæœå™¨åŸ è™Ÿ
BASE_URL=http://localhost:3000

# ===============================
# ğŸ—„ï¸ Database (MySQL)
# ===============================
DB_HOST=localhost        # è³‡æ–™åº«ä¸»æ©Ÿ
DB_PORT=3306             # MySQL é è¨­åŸ è™Ÿ
DB_USER=root             # è³‡æ–™åº«å¸³è™Ÿï¼ˆé–‹ç™¼ç”¨ï¼‰
DB_PASSWORD=your_password_here   # âš ï¸è«‹æ›æˆä½ è‡ªå·±çš„å¯†ç¢¼
DB_NAME=line_order_db    # è³‡æ–™åº«åç¨±

# ===============================
# ğŸ’¬ LINE Messaging API
# ===============================
LINE_CHANNEL_SECRET=your_line_channel_secret_here
LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token_here
LINE_BOT_BASE_URL=https://api.line.me/v2/bot/message
LINE_WEBHOOK_PATH=/webhook   # webhook endpoint
LINE_WEBHOOK_FULL_URL=https://your-domain.com/webhook  # éƒ¨ç½²å¾Œæ­£å¼ç¶²å€

# ===============================
# ğŸ” JWT / Security
# ===============================
JWT_SECRET=my_jwt_secret_token
TOKEN_EXPIRE_DAYS=7

# ===============================
# ğŸ’Œ Email / Notification (Optional)
# ===============================
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USER=your_email@gmail.com
MAIL_PASS=your_email_password

# ===============================
# ğŸ§  Cache / Redis (Optional)
# ===============================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ===============================
# ğŸ§¾ Logging &amp; Debug
# ===============================
LOG_LEVEL=debug
ENABLE_WEBHOOK_LOG=true
</code></pre>
<blockquote>
<p>âœ… <strong>é–‹ç™¼å»ºè­°</strong>ï¼š</p>
<ul>
<li><code>.env</code> ä¸è¦ä¸Šå‚³åˆ° GitHubï¼ˆåŠ å…¥ <code>.gitignore</code>ï¼‰</li>
<li>ä¸Šç·šç’°å¢ƒä½¿ç”¨ <code>.env.production</code></li>
<li>ç”¨ <code>dotenv</code> å¥—ä»¶è¼‰å…¥è¨­å®š</li>
</ul>
</blockquote>
<hr>
<h1 id="ğŸ—„ï¸-äºŒã€db-init-sql-è³‡æ–™åº«åˆå§‹åŒ–æª”"><a href="#ğŸ—„ï¸-äºŒã€db-init-sql-è³‡æ–™åº«åˆå§‹åŒ–æª”" class="headerlink" title="ğŸ—„ï¸ äºŒã€db_init.sql è³‡æ–™åº«åˆå§‹åŒ–æª”"></a>ğŸ—„ï¸ äºŒã€<code>db_init.sql</code> è³‡æ–™åº«åˆå§‹åŒ–æª”</h1><blockquote>
<p>ğŸ“ æª”æ¡ˆä½ç½®ï¼š<code>/backend/db/db_init.sql</code></p>
</blockquote>
<pre><code class="sql">-- ================================================
-- ğŸ“˜ LINE ç·šä¸Šè¨‚å–®ç³»çµ± - MySQL è³‡æ–™åº«åˆå§‹åŒ–
-- ================================================

CREATE DATABASE IF NOT EXISTS line_order_db
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;

USE line_order_db;

-- =============================
-- ğŸ§â€â™€ï¸ ä½¿ç”¨è€… (LINE User)
-- =============================
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    line_user_id VARCHAR(100) NOT NULL UNIQUE,
    display_name VARCHAR(100),
    phone VARCHAR(30),
    email VARCHAR(100),
    joined_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- =============================
-- ğŸ›ï¸ å•†å“ (Product)
-- =============================
CREATE TABLE IF NOT EXISTS products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    stock INT DEFAULT 0,
    category VARCHAR(50),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- =============================
-- ğŸ§¾ è¨‚å–® (Order)
-- =============================
CREATE TABLE IF NOT EXISTS orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    status ENUM(&#39;pending&#39;,&#39;paid&#39;,&#39;cancelled&#39;,&#39;completed&#39;) DEFAULT &#39;pending&#39;,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- =============================
-- ğŸ“¦ è¨‚å–®æ˜ç´° (Order Items)
-- =============================
CREATE TABLE IF NOT EXISTS order_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT DEFAULT 1,
    price DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(id),
    FOREIGN KEY (product_id) REFERENCES products(id)
);

-- =============================
-- ğŸ’¬ è¨Šæ¯è¨˜éŒ„ (LINE Message Log)
-- =============================
CREATE TABLE IF NOT EXISTS message_log (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    message_text TEXT,
    message_type VARCHAR(30),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- =============================
-- ğŸ”‘ æ¸¬è©¦è³‡æ–™ï¼ˆé¸æ“‡æ€§ï¼‰
-- =============================
INSERT INTO products (name, description, price, stock, category)
VALUES
(&#39;æ‹¿éµå’–å•¡&#39;, &#39;é¦™æ¿ƒé †å£çš„æ‹¿éµ&#39;, 80.00, 20, &#39;é£²å“&#39;),
(&#39;ç¾å¼å’–å•¡&#39;, &#39;ç„¡ç³–ç¾å¼ï¼Œæ¸…çˆ½æç¥&#39;, 60.00, 30, &#39;é£²å“&#39;),
(&#39;æŠ¹èŒ¶è›‹ç³•&#39;, &#39;æŠ¹èŒ¶æ§å¿…åƒ&#39;, 120.00, 10, &#39;ç”œé»&#39;);
</code></pre>
<hr>
<h1 id="ğŸ§­-ä¸‰ã€åˆå§‹åŒ–èˆ‡æ¸¬è©¦æ­¥é©Ÿ"><a href="#ğŸ§­-ä¸‰ã€åˆå§‹åŒ–èˆ‡æ¸¬è©¦æ­¥é©Ÿ" class="headerlink" title="ğŸ§­ ä¸‰ã€åˆå§‹åŒ–èˆ‡æ¸¬è©¦æ­¥é©Ÿ"></a>ğŸ§­ ä¸‰ã€åˆå§‹åŒ–èˆ‡æ¸¬è©¦æ­¥é©Ÿ</h1><h3 id="ğŸ§°-Step-1-å»ºç«‹-env"><a href="#ğŸ§°-Step-1-å»ºç«‹-env" class="headerlink" title="ğŸ§° Step 1. å»ºç«‹ .env"></a>ğŸ§° Step 1. å»ºç«‹ <code>.env</code></h3><p>åœ¨ <code>backend</code> ç›®éŒ„æ–°å¢ <code>.env</code>ï¼Œè²¼ä¸Šä¸Šè¿°å…§å®¹ä¸¦ä¿®æ”¹ï¼š</p>
<pre><code class="bash">DB_USER=root
DB_PASSWORD=ä½ çš„MySQLå¯†ç¢¼
</code></pre>
<h3 id="ğŸ§°-Step-2-åŒ¯å…¥è³‡æ–™åº«"><a href="#ğŸ§°-Step-2-åŒ¯å…¥è³‡æ–™åº«" class="headerlink" title="ğŸ§° Step 2. åŒ¯å…¥è³‡æ–™åº«"></a>ğŸ§° Step 2. åŒ¯å…¥è³‡æ–™åº«</h3><p>æ‰“é–‹çµ‚ç«¯æ©Ÿï¼ˆæˆ– MySQL Workbenchï¼‰ï¼š</p>
<pre><code class="bash">mysql -u root -p &lt; db/db_init.sql
</code></pre>
<p>æª¢æŸ¥ï¼š</p>
<pre><code class="bash">SHOW DATABASES;
USE line_order_db;
SHOW TABLES;
</code></pre>
<h3 id="ğŸ§°-Step-3-å•Ÿå‹•ä¼ºæœå™¨"><a href="#ğŸ§°-Step-3-å•Ÿå‹•ä¼ºæœå™¨" class="headerlink" title="ğŸ§° Step 3. å•Ÿå‹•ä¼ºæœå™¨"></a>ğŸ§° Step 3. å•Ÿå‹•ä¼ºæœå™¨</h3><p>åœ¨ <code>backend</code> ç›®éŒ„åŸ·è¡Œï¼š</p>
<pre><code class="bash">npm install
npm run dev
</code></pre>
<h3 id="ğŸ§°-Step-4-é©—è­‰-LINE-Webhook"><a href="#ğŸ§°-Step-4-é©—è­‰-LINE-Webhook" class="headerlink" title="ğŸ§° Step 4. é©—è­‰ LINE Webhook"></a>ğŸ§° Step 4. é©—è­‰ LINE Webhook</h3><p>æŠŠ <code>.env</code> å…§çš„ <code>LINE_WEBHOOK_FULL_URL</code> å¡«å…¥ LINE Developer è¨­å®šä¸­ã€‚<br>å†ç™¼ä¸€å‰‡è¨Šæ¯æ¸¬è©¦ â†’ çµ‚ç«¯æ‡‰é¡¯ç¤ºã€ŒWebhook receivedã€ã€‚</p>
<hr>
<p>å¦‚æœä½ é¡˜æ„ï¼Œæˆ‘å¯ä»¥å¹«ä½ ç”Ÿæˆï¼š</p>
<blockquote>
<p>âœ… <code>backend/config.js</code><br>âœ… <code>backend/db.js</code>ï¼ˆè®€å– <code>.env</code> ä¸¦é€£ç·š MySQLï¼‰<br>âœ… <code>backend/routes/orderRoutes.js</code><br>é€™ä¸‰å€‹æª”æ¡ˆæ§‹æˆä½ çš„ <strong>Node.js + MySQL åŸºç¤éª¨æ¶</strong>ï¼Œ<br>å¯ä»¥ç›´æ¥èˆ‡ <code>.env</code>ã€<code>db_init.sql</code> æ­é…ä½¿ç”¨ã€‚</p>
</blockquote>
<p>æ˜¯å¦è¦æˆ‘ç¾åœ¨å¹«ä½ ç”Ÿæˆé€™ä¸‰å€‹æª”æ¡ˆï¼Ÿ</p>

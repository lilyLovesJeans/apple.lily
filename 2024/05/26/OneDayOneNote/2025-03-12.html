<hr>
<h2 id="title-2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼-ç¬¬äºŒæ­¥date-2025-09-06-23-08-42tags-Javascript-Vue-description-2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼-ç¬¬äºŒæ­¥"><a href="#title-2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼-ç¬¬äºŒæ­¥date-2025-09-06-23-08-42tags-Javascript-Vue-description-2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼-ç¬¬äºŒæ­¥" class="headerlink" title="title: 2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼ -ç¬¬äºŒæ­¥date: 2025-09-06 23:08:42tags:  [Javascript,Vue]description:  2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼ -ç¬¬äºŒæ­¥"></a>title: 2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼ -ç¬¬äºŒæ­¥<br>date: 2025-09-06 23:08:42<br>tags:  [Javascript,Vue]<br>description:  2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼ -ç¬¬äºŒæ­¥</h2><h1 id="2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼-ç¬¬äºŒæ­¥"><a href="#2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼-ç¬¬äºŒæ­¥" class="headerlink" title="2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼ -ç¬¬äºŒæ­¥"></a>2025-03-12-åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼ -ç¬¬äºŒæ­¥</h1><p>ç•¶ç„¶å¯ä»¥ï¼Œä¸‹é¢æ˜¯ä½ é€™ä»½ <code>CountryInfo.vue</code> çš„ç¨‹å¼ç¢¼é€è¡Œè§£é‡‹ï¼Œå¹«ä½ äº†è§£æ¯å€‹å€å¡Šçš„ <strong>ç”¨é€”èˆ‡åŸç†</strong>ã€‚é€™æœƒå¹«åŠ©ä½ æœªä¾†è‡ªå·±ç¶­è­·æˆ–æ“´å……åŠŸèƒ½ ğŸ§ ğŸ’¡</p>
<hr>
<h2 id="ğŸ”·-å€å¡Šï¼šç•«é¢çµæ§‹"><a href="#ğŸ”·-å€å¡Šï¼šç•«é¢çµæ§‹" class="headerlink" title="ğŸ”· &lt;template&gt; å€å¡Šï¼šç•«é¢çµæ§‹"></a>ğŸ”· <code>&lt;template&gt;</code> å€å¡Šï¼šç•«é¢çµæ§‹</h2><pre><code class="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;ğŸŒ åœ‹å®¶è³‡è¨Šèˆ‡åœ°åœ–æ‡‰ç”¨ç¨‹å¼&lt;/h2&gt;
    &lt;div id=&quot;map&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 id="èªªæ˜ï¼š"><a href="#èªªæ˜ï¼š" class="headerlink" title="èªªæ˜ï¼š"></a>èªªæ˜ï¼š</h3><ul>
<li><p><code>h2</code> æ˜¯æ¨™é¡Œï¼Œè®“ä½¿ç”¨è€…çŸ¥é“é€™æ˜¯ä»€éº¼æ‡‰ç”¨ã€‚</p>
</li>
<li><p><code>#map</code> æ˜¯ Leaflet åœ°åœ–è¦æ›è¼‰çš„ä½ç½®ï¼ˆ<strong>å¾ˆé‡è¦ï¼</strong>ï¼‰</p>
<ul>
<li>Leaflet æœƒç”¨ JavaScript æŠŠåœ°åœ–ã€Œæ’å…¥ã€é€™å€‹ DOM å…ƒç´ ä¸­ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ğŸ”·-å€å¡Šï¼šé‚è¼¯ç¨‹å¼"><a href="#ğŸ”·-å€å¡Šï¼šé‚è¼¯ç¨‹å¼" class="headerlink" title="ğŸ”· &lt;script setup&gt; å€å¡Šï¼šé‚è¼¯ç¨‹å¼"></a>ğŸ”· <code>&lt;script setup&gt;</code> å€å¡Šï¼šé‚è¼¯ç¨‹å¼</h2><pre><code class="js">import { onMounted } from &#39;vue&#39;
</code></pre>
<p>âœ… åŒ¯å…¥ <code>onMounted()</code>ï¼šVue çµ„ä»¶æ›è¼‰åˆ°ç•«é¢æ™‚æœƒåŸ·è¡Œçš„ç”Ÿå‘½é€±æœŸå‡½å¼ã€‚</p>
<hr>
<pre><code class="js">onMounted(async () =&gt; {
</code></pre>
<p>ç•¶åœ°åœ–ç•«é¢ <code>#map</code> è¢« Vue æ¸²æŸ“åˆ°ç•«é¢ä¸Šå¾Œï¼Œé€™æ®µç¨‹å¼ç¢¼å°±æœƒé–‹å§‹åŸ·è¡Œã€‚</p>
<hr>
<h3 id="ğŸ§±-åœ°åœ–åˆå§‹åŒ–-éŒ¯èª¤åµæ¸¬"><a href="#ğŸ§±-åœ°åœ–åˆå§‹åŒ–-éŒ¯èª¤åµæ¸¬" class="headerlink" title="ğŸ§± åœ°åœ–åˆå§‹åŒ– &amp; éŒ¯èª¤åµæ¸¬"></a>ğŸ§± åœ°åœ–åˆå§‹åŒ– &amp; éŒ¯èª¤åµæ¸¬</h3><pre><code class="js">  try {
    if (!window.L) {
      throw new Error(&#39;Leaflet (L) å°šæœªè¼‰å…¥&#39;)
    }
</code></pre>
<p>âœ… ç¢ºä¿å…¨åŸŸè®Šæ•¸ <code>L</code> å­˜åœ¨ï¼Œé€™æ˜¯ Leaflet çš„ä¸»å‡½å¼ï¼ˆå› ç‚ºä½ æ˜¯ç”¨ CDNï¼Œä¸æ˜¯ç”¨ <code>import</code>ï¼‰</p>
<hr>
<h3 id="ğŸ—ºï¸-å»ºç«‹åœ°åœ–"><a href="#ğŸ—ºï¸-å»ºç«‹åœ°åœ–" class="headerlink" title="ğŸ—ºï¸ å»ºç«‹åœ°åœ–"></a>ğŸ—ºï¸ å»ºç«‹åœ°åœ–</h3><pre><code class="js">    const map = L.map(&#39;map&#39;).setView([20, 0], 2)
</code></pre>
<p>âœ… å»ºç«‹ Leaflet åœ°åœ–ï¼Œä¸¦è¨­å®šåˆå§‹è¦–è§’ï¼š</p>
<ul>
<li><code>#map</code>ï¼šåœ°åœ–æ’å…¥çš„å®¹å™¨ ID</li>
<li><code>[20, 0]</code>ï¼šç·¯åº¦ 20ã€ç¶“åº¦ 0 â†’ å¤§è‡´ä¸Šæ˜¯éæ´²ä¸­é–“</li>
<li><code>2</code>ï¼šæ”¾å¤§å€ç‡ï¼Œå°æ•¸å­—è¡¨ç¤ºç¸®å¾—å¾ˆé ï¼ˆçœ‹æ•´å€‹ä¸–ç•Œï¼‰</li>
</ul>
<hr>
<h3 id="ğŸ§±-åŠ å…¥åº•åœ–ï¼ˆOpenStreetMapï¼‰"><a href="#ğŸ§±-åŠ å…¥åº•åœ–ï¼ˆOpenStreetMapï¼‰" class="headerlink" title="ğŸ§± åŠ å…¥åº•åœ–ï¼ˆOpenStreetMapï¼‰"></a>ğŸ§± åŠ å…¥åº•åœ–ï¼ˆOpenStreetMapï¼‰</h3><pre><code class="js">    L.tileLayer(&#39;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;, {
      attribution: &#39;Â© OpenStreetMap contributors&#39;
    }).addTo(map)
</code></pre>
<p>âœ… é€™æ˜¯ Leaflet çš„åº•åœ–ä¾†æºï¼Œä½¿ç”¨ OpenStreetMap çš„å…è²»åœ–è³‡ã€‚</p>
<ul>
<li><code>{s}</code>ã€<code>{z}</code>ã€<code>{x}</code>ã€<code>{y}</code> æ˜¯åœ°åœ–ç“¦ç‰‡ç³»çµ±çš„è®Šæ•¸ã€‚</li>
</ul>
<hr>
<h3 id="ğŸ§©-è¨­å®š-marker-åœ–ç¤ºï¼ˆé¿å…é¡¯ç¤ºä¸å‡ºä¾†ï¼‰"><a href="#ğŸ§©-è¨­å®š-marker-åœ–ç¤ºï¼ˆé¿å…é¡¯ç¤ºä¸å‡ºä¾†ï¼‰" class="headerlink" title="ğŸ§© è¨­å®š marker åœ–ç¤ºï¼ˆé¿å…é¡¯ç¤ºä¸å‡ºä¾†ï¼‰"></a>ğŸ§© è¨­å®š marker åœ–ç¤ºï¼ˆé¿å…é¡¯ç¤ºä¸å‡ºä¾†ï¼‰</h3><pre><code class="js">    const iconUrl = &#39;https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png&#39;
    const shadowUrl = &#39;https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png&#39;

    const DefaultIcon = L.icon({
      iconUrl,
      shadowUrl,
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    })
    L.Marker.prototype.options.icon = DefaultIcon
</code></pre>
<p>âœ… Leaflet ä½¿ç”¨è‡ªå·±çš„ marker åœ–ç¤ºï¼Œä½†åœ¨ CDN ç’°å¢ƒä¸‹å¸¸å¸¸ã€Œæ‰¾ä¸åˆ°åœ–ç¤ºã€ã€‚<br>é€™æ®µç¨‹å¼æ˜ç¢ºæŒ‡å®šåœ–ç¤ºç¶²å€ï¼Œä¸¦è¨­å®šç‚ºé è¨­åœ–ç¤ºï¼Œè§£æ±ºåœ–ç¤ºä¸è¦‹çš„å•é¡Œã€‚</p>
<hr>
<h3 id="ğŸŒ-æŠ“åœ‹å®¶è³‡æ–™ï¼ˆREST-Countries-APIï¼‰"><a href="#ğŸŒ-æŠ“åœ‹å®¶è³‡æ–™ï¼ˆREST-Countries-APIï¼‰" class="headerlink" title="ğŸŒ æŠ“åœ‹å®¶è³‡æ–™ï¼ˆREST Countries APIï¼‰"></a>ğŸŒ æŠ“åœ‹å®¶è³‡æ–™ï¼ˆREST Countries APIï¼‰</h3><pre><code class="js">    const res = await fetch(&#39;https://restcountries.com/v3.1/all?fields=name,capital,latlng,flags,currencies&#39;)
    const countries = await res.json()
</code></pre>
<p>âœ… å‘ REST Countries API è«‹æ±‚æ‰€æœ‰åœ‹å®¶è³‡æ–™ï¼Œä½†<strong>åªå–éœ€è¦çš„æ¬„ä½</strong>ï¼Œæ¸›å°‘è³‡æ–™é‡ï¼š</p>
<ul>
<li><code>name</code>ï¼šåœ‹å®¶åç¨±</li>
<li><code>capital</code>ï¼šé¦–éƒ½</li>
<li><code>latlng</code>ï¼šç¶“ç·¯åº¦</li>
<li><code>flags</code>ï¼šåœ‹æ——åœ–</li>
<li><code>currencies</code>ï¼šè²¨å¹£è³‡æ–™</li>
</ul>
<hr>
<h3 id="ğŸ›¡ï¸-é˜²å‘†ï¼šAPI-å›å‚³ä¸æ˜¯é™£åˆ—"><a href="#ğŸ›¡ï¸-é˜²å‘†ï¼šAPI-å›å‚³ä¸æ˜¯é™£åˆ—" class="headerlink" title="ğŸ›¡ï¸ é˜²å‘†ï¼šAPI å›å‚³ä¸æ˜¯é™£åˆ—"></a>ğŸ›¡ï¸ é˜²å‘†ï¼šAPI å›å‚³ä¸æ˜¯é™£åˆ—</h3><pre><code class="js">    if (!Array.isArray(countries)) {
      console.error(&#39;API å‚³å›çš„è³‡æ–™ä¸æ˜¯é™£åˆ—ï¼š&#39;, countries)
      return
    }
</code></pre>
<p>âœ… ç¢ºä¿ <code>countries</code> æ˜¯ä¸€å€‹é™£åˆ—ï¼Œå¦‚æœä¸æ˜¯å°±è·³å‡ºï¼Œé¿å… <code>.forEach</code> å‡ºéŒ¯ã€‚</p>
<hr>
<h3 id="ğŸ“Œ-åŠ å…¥æ¯å€‹åœ‹å®¶çš„-marker"><a href="#ğŸ“Œ-åŠ å…¥æ¯å€‹åœ‹å®¶çš„-marker" class="headerlink" title="ğŸ“Œ åŠ å…¥æ¯å€‹åœ‹å®¶çš„ marker"></a>ğŸ“Œ åŠ å…¥æ¯å€‹åœ‹å®¶çš„ marker</h3><pre><code class="js">    countries.forEach((country) =&gt; {
      const latlng = country.latlng
      const name = country.name?.common || &#39;æœªçŸ¥&#39;
      const capital = country.capital?.[0] || &#39;æœªçŸ¥&#39;
      const flag = country.flags?.png || &#39;&#39;
      const currency = country.currencies
        ? Object.values(country.currencies)[0]?.symbol || &#39;æœªçŸ¥&#39;
        : &#39;æœªçŸ¥&#39;

      if (latlng?.length === 2) {
        const marker = L.marker(latlng).addTo(map)
        marker.bindPopup(`
          &lt;div style=&quot;text-align: center;&quot;&gt;
            &lt;img src=&quot;${flag}&quot; width=&quot;80&quot;&gt;&lt;br&gt;
            &lt;strong&gt;${name}&lt;/strong&gt;&lt;br&gt;
            é¦–éƒ½ï¼š${capital}&lt;br&gt;
            è²¨å¹£ï¼š${currency}
          &lt;/div&gt;
        `)
      }
    })
</code></pre>
<h3 id="èªªæ˜ï¼š-1"><a href="#èªªæ˜ï¼š-1" class="headerlink" title="èªªæ˜ï¼š"></a>èªªæ˜ï¼š</h3><ul>
<li>âœ… <code>country.latlng</code>ï¼šmarker åº§æ¨™</li>
<li>âœ… <code>country.name.common</code>ï¼šå¸¸ç”¨åç¨±ï¼Œä¾‹å¦‚ã€ŒTaiwanã€</li>
<li>âœ… <code>country.capital[0]</code>ï¼šé¦–éƒ½</li>
<li>âœ… <code>country.flags.png</code>ï¼šåœ‹æ——åœ–ç‰‡</li>
<li>âœ… <code>currencies</code>ï¼šè²¨å¹£è³‡è¨Šæ˜¯ç‰©ä»¶ï¼Œå…ˆè½‰æˆé™£åˆ—å¾Œå–ç¬¬ 1 ç­†</li>
<li>âœ… <code>L.marker(latlng)</code>ï¼šå»ºç«‹ marker</li>
<li>âœ… <code>.bindPopup(...)</code>ï¼šé» marker æ™‚æœƒè·³å‡º popup</li>
</ul>
<hr>
<h3 id="ğŸ§¯-æ•æ‰éŒ¯èª¤"><a href="#ğŸ§¯-æ•æ‰éŒ¯èª¤" class="headerlink" title="ğŸ§¯ æ•æ‰éŒ¯èª¤"></a>ğŸ§¯ æ•æ‰éŒ¯èª¤</h3><pre><code class="js">  } catch (err) {
    console.error(&#39;åœ°åœ–åˆå§‹åŒ–éŒ¯èª¤ï¼š&#39;, err)
  }
</code></pre>
<p>âœ… å¦‚æœä»¥ä¸Šä»»ä½•ä¸€æ®µå‡ºéŒ¯ï¼ŒæœƒæŠŠéŒ¯èª¤è³‡è¨Šé¡¯ç¤ºåœ¨é–‹ç™¼è€…å·¥å…·ä¸­ï¼Œä¸æœƒæ•´å€‹å£æ‰ã€‚</p>
<hr>
<h2 id="ğŸ¨-å€å¡Šï¼šæ¨£å¼"><a href="#ğŸ¨-å€å¡Šï¼šæ¨£å¼" class="headerlink" title="ğŸ¨ &lt;style scoped&gt; å€å¡Šï¼šæ¨£å¼"></a>ğŸ¨ <code>&lt;style scoped&gt;</code> å€å¡Šï¼šæ¨£å¼</h2><pre><code class="css">h2 {
  font-size: 30px;
  margin-bottom: 15px;
}

#map {
  height: 90vh;
  width: 100%;
}
</code></pre>
<ul>
<li><p><code>h2</code>ï¼šè®“æ¨™é¡Œçœ‹èµ·ä¾†æ›´å¤§ã€æ¼‚äº®</p>
</li>
<li><p><code>#map</code>ï¼š</p>
<ul>
<li>é«˜åº¦è¨­ç‚º 90vhï¼ˆç€è¦½å™¨è¦–çª— 90% é«˜ï¼‰</li>
<li>åœ°åœ–æ‰æœƒé¡¯ç¤ºå‡ºä¾†ï¼ˆLeaflet éœ€è¦å®¹å™¨é«˜åº¦ï¼‰</li>
</ul>
</li>
</ul>
<hr>
<h2 id="âœ…-ç¸½çµ"><a href="#âœ…-ç¸½çµ" class="headerlink" title="âœ… ç¸½çµ"></a>âœ… ç¸½çµ</h2><p>é€™å€‹ <code>CountryInfo.vue</code>ï¼š</p>
<table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>æ˜¯å¦å®Œæˆ</th>
</tr>
</thead>
<tbody><tr>
<td>ä¸–ç•Œåœ°åœ–åˆå§‹åŒ–</td>
<td>âœ…</td>
</tr>
<tr>
<td>ä½¿ç”¨ OpenStreetMap ç•¶åº•åœ–</td>
<td>âœ…</td>
</tr>
<tr>
<td>ä½¿ç”¨ REST API å–å¾—å„åœ‹è³‡æ–™</td>
<td>âœ…</td>
</tr>
<tr>
<td>ä½¿ç”¨ CDN ç‰ˆæœ¬çš„ Leaflet</td>
<td>âœ…</td>
</tr>
<tr>
<td>åœ¨æ¯å€‹åœ‹å®¶ç¶“ç·¯åº¦åŠ  marker</td>
<td>âœ…</td>
</tr>
<tr>
<td>é» marker é¡¯ç¤ºåœ‹æ——+é¦–éƒ½+è²¨å¹£</td>
<td>âœ…</td>
</tr>
<tr>
<td>éŒ¯èª¤è™•ç†èˆ‡é˜²å‘†</td>
<td>âœ…</td>
</tr>
</tbody></table>
<hr>

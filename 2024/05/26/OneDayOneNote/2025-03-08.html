<hr>
<h2 id="title-20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬-4-æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚date-2025-09-06-23-03-37categories-OneDayOneNotetags-Javascript-Vue-description-20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬-4-æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚"><a href="#title-20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬-4-æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚date-2025-09-06-23-03-37categories-OneDayOneNotetags-Javascript-Vue-description-20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬-4-æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚" class="headerlink" title="title: 20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬ 4 æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚date: 2025-09-06 23:03:37categories: OneDayOneNotetags:  [Javascript,Vue]description: 20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬ 4 æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚"></a>title: 20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬ 4 æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚<br>date: 2025-09-06 23:03:37<br>categories: OneDayOneNote<br>tags:  [Javascript,Vue]<br>description: 20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬ 4 æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚</h2><h1 id="20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬-4-æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚"><a href="#20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬-4-æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚" class="headerlink" title="20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬ 4 æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚"></a>20250308-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ã€çš„ç¬¬ 4 æ­¥ï¼šè‡ªç”±é¸æ“‡å¤šå€‹åŸå¸‚</h1><pre><code class="html">&lt;template&gt;
  &lt;h2&gt;ğŸŒ¦ï¸ è‡ªé¸ä¸‰å€‹åŸå¸‚å¤©æ°£æ¦‚æ³&lt;/h2&gt;

  &lt;!-- å¤šé¸åŸå¸‚ --&gt;
  &lt;label&gt;è«‹é¸æ“‡æœ€å¤šä¸‰å€‹åŸå¸‚ï¼š&lt;/label&gt;
  &lt;!-- &lt;select multiple v-model=&quot;selectedCities&quot; @change=&quot;checkLimit&quot;&gt; --&gt;
    &lt;select multiple v-model=&quot;selectedCities&quot; &gt;
    &lt;option v-for=&quot;city in allCityNames&quot; :key=&quot;city&quot;&gt;{{ city }}&lt;/option&gt;
  &lt;/select&gt;
  &lt;p&gt;ç›®å‰é¸æ“‡ï¼š{{ selectedCities.join(&#39;, &#39;) }}&lt;/p&gt;
  &lt;!-- &lt;p v-if=&quot;limitReached&quot; style=&quot;color: red;&quot;&gt;âš ï¸ æœ€å¤šåªèƒ½é¸ä¸‰å€‹åŸå¸‚&lt;/p&gt; --&gt;

  &lt;div class=&quot;weather-container&quot;&gt;
    &lt;div v-for=&quot;city in filteredWeatherData&quot; :key=&quot;city.locationName&quot; class=&quot;city-card&quot;&gt;
      &lt;h3&gt;ğŸŒ† {{ city.locationName }}&lt;/h3&gt;
      &lt;p&gt;â˜€ï¸ å¤©æ°£ï¼š{{ getWeatherElement(city, &#39;Wx&#39;) }}&lt;/p&gt;
      &lt;p&gt;ğŸ”¥ æœ€é«˜æº«ï¼š{{ getWeatherElement(city, &#39;MaxT&#39;) }}Â°C&lt;/p&gt;
      &lt;p&gt;â„ï¸ æœ€ä½æº«ï¼š{{ getWeatherElement(city, &#39;MinT&#39;) }}Â°C&lt;/p&gt;
      &lt;p&gt;ğŸŒ§ï¸ é™é›¨æ©Ÿç‡ï¼š{{ getWeatherElement(city, &#39;PoP&#39;) }}%&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, computed, onMounted } from &#39;vue&#39;

const apiKey = &#39;CWA-290D12F1-3FA3-4A61-B613-623327DD04C2&#39; // &lt;&lt;--- è«‹æ›¿æ›ç‚ºä½ è¨»å†Šçš„ CWA API Key

const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${apiKey}`

const weatherData = ref([])
const allCityNames = ref([])
const selectedCities = ref([])
const limitReached = ref(false)

onMounted(async () =&gt; {
  try {
    const response = await fetch(url)
    const data = await response.json()
    const locations = data.records.location

    weatherData.value = locations
    allCityNames.value = locations.map(loc =&gt; loc.locationName)

    // é è¨­ä¸‰å€‹åŸå¸‚
    selectedCities.value = [&#39;è‡ºåŒ—å¸‚&#39;, &#39;è‡ºä¸­å¸‚&#39;, &#39;é«˜é›„å¸‚&#39;]
  } catch (error) {
    console.error(&#39;âŒ ç™¼ç”ŸéŒ¯èª¤:&#39;, error)
  }
})

// âœ… é™åˆ¶æœ€å¤šä¸‰å€‹åŸå¸‚
function checkLimit() {
  if (selectedCities.value.length &gt; 3) {
    selectedCities.value.pop() // ç§»é™¤æœ€å¾Œé¸çš„
    limitReached.value = true
    setTimeout(() =&gt; {
      limitReached.value = false
    }, 2000)
  }
}

const filteredWeatherData = computed(() =&gt;
  weatherData.value.filter(city =&gt; selectedCities.value.includes(city.locationName))
)

function getWeatherElement(city, elementName) {
  const element = city.weatherElement.find(el =&gt; el.elementName === elementName)
  return element?.time[0]?.parameter?.parameterName || &#39;N/A&#39;
}
&lt;/script&gt;

&lt;style scoped&gt;
select {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  font-size: 1rem;
}

.weather-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
}

.city-card {
  flex: 1 1 300px;
  max-width: 300px;
  background: #f0f8ff;
  padding: 1rem;
  border-radius: 0.75rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  border-left: 6px solid #3498db;
}
&lt;/style&gt;
</code></pre>

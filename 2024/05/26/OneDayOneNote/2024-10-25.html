<hr>
<h2 id="title-2024-10-25-015-學寫API-xUnit基礎核心概念date-2024-10-15-10-51-21categories-OneDayOneNotetags-C-WebAPI-description-2024-10-25-015-學寫API-xUnit基礎核心概念"><a href="#title-2024-10-25-015-學寫API-xUnit基礎核心概念date-2024-10-15-10-51-21categories-OneDayOneNotetags-C-WebAPI-description-2024-10-25-015-學寫API-xUnit基礎核心概念" class="headerlink" title="title: 2024-10-25 015_學寫API_xUnit基礎核心概念date: 2024-10-15 10:51:21categories: OneDayOneNotetags:  [C#, WebAPI ]description: 2024-10-25 015_學寫API_xUnit基礎核心概念"></a>title: 2024-10-25 015_學寫API_xUnit基礎核心概念<br>date: 2024-10-15 10:51:21<br>categories: OneDayOneNote<br>tags:  [C#, WebAPI ]<br>description: 2024-10-25 015_學寫API_xUnit基礎核心概念</h2><h2 id="2024-10-25-015-學寫API-xUnit基礎核心概念"><a href="#2024-10-25-015-學寫API-xUnit基礎核心概念" class="headerlink" title="2024-10-25 015_學寫API_xUnit基礎核心概念"></a>2024-10-25 015_學寫API_xUnit基礎核心概念</h2><p>當然可以，讓我先跟你介紹 xUnit 的一些基礎核心概念，幫助你快速上手。</p>
<h3 id="xUnit-基礎核心概念"><a href="#xUnit-基礎核心概念" class="headerlink" title="xUnit 基礎核心概念"></a>xUnit 基礎核心概念</h3><p>xUnit 是一個用於 .NET 的開源單元測試框架，它提供了一套簡潔且有效的方式來編寫和執行單元測試。它是目前 .NET 社區中非常流行的測試框架之一。以下是一些你需要了解的核心概念和基礎部分：</p>
<h4 id="1-測試類和測試方法"><a href="#1-測試類和測試方法" class="headerlink" title="1. 測試類和測試方法"></a>1. 測試類和測試方法</h4><ul>
<li><strong>測試類</strong>：測試類是包含測試方法的類。每個測試類都可以包含一組相關的測試，通常用來測試特定類或功能。</li>
<li><strong>測試方法</strong>：測試方法是用於檢查應用程序特定部分是否按預期工作的函數。每個測試方法應該是獨立的，這意味著它不應依賴於其他測試方法。</li>
</ul>
<h4 id="2-Fact-和-Theory"><a href="#2-Fact-和-Theory" class="headerlink" title="2. [Fact] 和 [Theory]"></a>2. <code>[Fact]</code> 和 <code>[Theory]</code></h4><ul>
<li><p>**<code>[Fact]</code>**：這是 xUnit 的一個標籤，表示這是一個無參數的測試方法。每個 <code>[Fact]</code> 方法都應該是獨立測試某個特定情況。</p>
<pre><code class="csharp">[Fact]
public void Test_Something_ReturnsExpectedResult()
{
    // Arrange (準備)：設置測試的初始條件
    // Act (執行)：調用被測試的功能
    // Assert (驗證)：檢查結果是否符合預期
}
</code></pre>
</li>
<li><p>**<code>[Theory]</code>**：當你想要測試相同方法的多組輸入時，可以使用 <code>[Theory]</code>。它允許你使用多個不同的數據點來測試同一個方法，這些數據可以通過 <code>[InlineData]</code> 來提供。</p>
<pre><code class="csharp">[Theory]
[InlineData(1, 2, 3)]  // 第一組測試數據
[InlineData(-1, 2, 1)]  // 第二組測試數據
public void Test_Add(int a, int b, int expected)
{
    // Act
    var result = a + b;

    // Assert
    Assert.Equal(expected, result);
}
</code></pre>
</li>
</ul>
<h4 id="3-測試的三個階段"><a href="#3-測試的三個階段" class="headerlink" title="3. 測試的三個階段"></a>3. 測試的三個階段</h4><ul>
<li>**Arrange (準備)**：在測試開始之前，設置所有需要的條件和環境。這包括初始化物件，配置參數等。</li>
<li>**Act (執行)**：執行被測試的功能。這通常是測試目標中的方法或行為。</li>
<li>**Assert (驗證)**：檢查輸出的結果是否符合預期。這是檢查測試是否通過的步驟，通常使用 <code>Assert</code> 類中的方法來完成。</li>
</ul>
<h4 id="4-Assert-方法"><a href="#4-Assert-方法" class="headerlink" title="4. Assert 方法"></a>4. <code>Assert</code> 方法</h4><ul>
<li><p>**<code>Assert.Equal(expected, actual)</code>**：驗證兩個值是否相等。</p>
</li>
<li><p>**<code>Assert.True(condition)</code>**：驗證一個條件是否為 <code>true</code>。</p>
</li>
<li><p>**<code>Assert.Throws&lt;ExceptionType&gt;(action)</code>**：驗證是否拋出了特定類型的異常。</p>
<p>xUnit 提供了很多 <code>Assert</code> 方法來驗證不同的情況，比如是否為 <code>null</code>，是否相同，集合的數量等。</p>
</li>
</ul>
<h4 id="5-測試命名規範"><a href="#5-測試命名規範" class="headerlink" title="5. 測試命名規範"></a>5. 測試命名規範</h4><ul>
<li>測試方法的名稱應該清晰且能描述測試的意圖。<br>通常可以使用以下格式：<pre><code>方法名稱_測試條件_預期結果
</code></pre>
例如：<code>Add_TwoPositiveNumbers_ReturnsSum</code> 表示測試一個 <code>Add</code> 方法，在輸入兩個正數時，期望返回它們的和。</li>
</ul>
<h4 id="6-測試生命週期方法"><a href="#6-測試生命週期方法" class="headerlink" title="6. 測試生命週期方法"></a>6. 測試生命週期方法</h4><ul>
<li><p><strong><code>[Fact]</code> 和 <code>[Theory]</code></strong> 方法本身是測試的主體，但有時我們還需要設置一些在所有測試之前或之後執行的初始化和清理工作。</p>
</li>
<li><p>xUnit 中提供了 <strong><code>IClassFixture</code></strong> 和 **<code>IDisposable</code>**，來配置測試的初始化和清理。</p>
<pre><code class="csharp">public class MyTests : IDisposable
{
    public MyTests()
    {
        // 每次測試前的初始化操作
    }

    public void Dispose()
    {
        // 每次測試後的清理操作
    }
}
</code></pre>
</li>
</ul>
<h4 id="7-使用-Moq-等工具進行-Mock"><a href="#7-使用-Moq-等工具進行-Mock" class="headerlink" title="7. 使用 Moq 等工具進行 Mock"></a>7. 使用 Moq 等工具進行 Mock</h4><ul>
<li><p>在單元測試中，我們有時需要模擬某些外部依賴，例如依賴注入的服務。</p>
</li>
<li><p><strong>Moq</strong> 是一個常用的 .NET 工具，用來模擬這些外部依賴。這樣可以測試某個類或方法，而不依賴於其他實際的服務。</p>
<pre><code class="csharp">var mockService = new Mock&lt;IMyService&gt;();
mockService.Setup(service =&gt; service.GetData()).Returns(&quot;Mock Data&quot;);
</code></pre>
</li>
</ul>
<h4 id="8-進行單元測試的工具和流程"><a href="#8-進行單元測試的工具和流程" class="headerlink" title="8. 進行單元測試的工具和流程"></a>8. 進行單元測試的工具和流程</h4><ul>
<li><strong>Visual Studio</strong>：你可以在 Visual Studio 中直接使用內置的 Test Explorer 來運行 xUnit 測試。</li>
<li><strong>命令行工具</strong>：如果你在命令行中使用 .NET CLI，也可以運行測試：<pre><code>dotnet test
</code></pre>
這個命令會在解決方案中查找所有測試項目並執行它們。</li>
</ul>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><ul>
<li><strong>xUnit 是一個單元測試框架</strong>，主要用來驗證你的程式碼是否符合預期。</li>
<li>使用 <strong><code>[Fact]</code></strong> 來編寫簡單的單元測試，使用 <strong><code>[Theory]</code></strong> 來進行多組數據的測試。</li>
<li><strong>測試方法</strong> 一般分為三個階段：準備（Arrange）、執行（Act）、驗證（Assert）。</li>
<li><strong><code>Assert</code></strong> 是用來檢查結果是否正確的工具。</li>
<li><strong>命名規範</strong> 和 <strong>測試流程的良好習慣</strong> 有助於保持測試代碼的可讀性和維護性。</li>
<li><strong>Mock 工具（如 Moq）</strong> 可以用來模擬外部依賴，以便測試專注於單一邏輯。</li>
</ul>
<p>理解這些基礎概念後，你就可以開始編寫和運行自己的 xUnit 測試，確保你的應用程序運行如預期並且更加穩定。如果你在實踐中遇到具體的困難，我也很樂意提供進一步的幫助！</p>

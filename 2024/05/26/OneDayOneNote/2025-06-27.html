<hr>
<h2 id="title-2025-06-27-Line-è¨‚å–®ç³»çµ±-éšæ®µCdate-2025-11-12-21-27-05categories-OneDayOneNotetags-OneNote-Lineè¨‚å–®ç³»çµ±-description-2025-06-27-Line-è¨‚å–®ç³»çµ±-éšæ®µC"><a href="#title-2025-06-27-Line-è¨‚å–®ç³»çµ±-éšæ®µCdate-2025-11-12-21-27-05categories-OneDayOneNotetags-OneNote-Lineè¨‚å–®ç³»çµ±-description-2025-06-27-Line-è¨‚å–®ç³»çµ±-éšæ®µC" class="headerlink" title="title: 2025-06-27 Line è¨‚å–®ç³»çµ±-éšæ®µCdate: 2025-11-12 21:27:05categories: OneDayOneNotetags:  [OneNote, Lineè¨‚å–®ç³»çµ±]description:   2025-06-27 Line è¨‚å–®ç³»çµ±-éšæ®µC"></a>title: 2025-06-27 Line è¨‚å–®ç³»çµ±-éšæ®µC<br>date: 2025-11-12 21:27:05<br>categories: OneDayOneNote<br>tags:  [OneNote, Lineè¨‚å–®ç³»çµ±]<br>description:   2025-06-27 Line è¨‚å–®ç³»çµ±-éšæ®µC</h2><h2 id="2025-06-27-Line-è¨‚å–®ç³»çµ±-éšæ®µC"><a href="#2025-06-27-Line-è¨‚å–®ç³»çµ±-éšæ®µC" class="headerlink" title="2025-06-27 Line è¨‚å–®ç³»çµ±-éšæ®µC"></a>2025-06-27 Line è¨‚å–®ç³»çµ±-éšæ®µC</h2><h2 id="ğŸ…²-éšæ®µ-Cï¼šLINE-Webhook-æ•´åˆ"><a href="#ğŸ…²-éšæ®µ-Cï¼šLINE-Webhook-æ•´åˆ" class="headerlink" title="ğŸ…² éšæ®µ Cï¼šLINE Webhook æ•´åˆ"></a>ğŸ…² éšæ®µ Cï¼šLINE Webhook æ•´åˆ</h2><h3 id="ğŸ¯-ç›®æ¨™"><a href="#ğŸ¯-ç›®æ¨™" class="headerlink" title="ğŸ¯ ç›®æ¨™"></a>ğŸ¯ ç›®æ¨™</h3><p>å»ºç«‹èƒ½èˆ‡ LINE Bot é€šè¨Šçš„ Webhookï¼Œä¸¦å¯«å…¥ MySQL è¨‚å–®ã€‚</p>
<hr>
<h3 id="ğŸ”§-æ­¥é©Ÿ"><a href="#ğŸ”§-æ­¥é©Ÿ" class="headerlink" title="ğŸ”§ æ­¥é©Ÿ"></a>ğŸ”§ æ­¥é©Ÿ</h3><h4 id="1ï¸âƒ£-è¨­å®š-LINE-Messaging-API"><a href="#1ï¸âƒ£-è¨­å®š-LINE-Messaging-API" class="headerlink" title="1ï¸âƒ£ è¨­å®š LINE Messaging API"></a>1ï¸âƒ£ è¨­å®š LINE Messaging API</h4><ol>
<li><p>åˆ° <a href="https://developers.line.biz/console/">LINE Developers Console</a></p>
</li>
<li><p>å»ºç«‹ Provider &amp; Channelï¼ˆMessaging APIï¼‰</p>
</li>
<li><p>å–å¾—ï¼š</p>
<ul>
<li>Channel Secret</li>
<li>Channel Access Token</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2ï¸âƒ£-å®‰è£-LINE-SDK"><a href="#2ï¸âƒ£-å®‰è£-LINE-SDK" class="headerlink" title="2ï¸âƒ£ å®‰è£ LINE SDK"></a>2ï¸âƒ£ å®‰è£ LINE SDK</h4><pre><code class="bash">npm install @line/bot-sdk
</code></pre>
<hr>
<h4 id="3ï¸âƒ£-æ–°å¢-webhook-è·¯ç”±ï¼ˆbackend-routes-line-jsï¼‰"><a href="#3ï¸âƒ£-æ–°å¢-webhook-è·¯ç”±ï¼ˆbackend-routes-line-jsï¼‰" class="headerlink" title="3ï¸âƒ£ æ–°å¢ webhook è·¯ç”±ï¼ˆbackend&#x2F;routes&#x2F;line.jsï¼‰"></a>3ï¸âƒ£ æ–°å¢ webhook è·¯ç”±ï¼ˆbackend&#x2F;routes&#x2F;line.jsï¼‰</h4><pre><code class="js">import express from &#39;express&#39;;
import { middleware, Client } from &#39;@line/bot-sdk&#39;;
import dotenv from &#39;dotenv&#39;;
dotenv.config();

const router = express.Router();

const config = {
  channelAccessToken: process.env.LINE_ACCESS_TOKEN,
  channelSecret: process.env.LINE_CHANNEL_SECRET,
};

const client = new Client(config);

router.post(&#39;/webhook&#39;, middleware(config), async (req, res) =&gt; {
  const events = req.body.events;
  for (const event of events) {
    if (event.type === &#39;message&#39; &amp;&amp; event.message.type === &#39;text&#39;) {
      const msg = event.message.text;
      if (msg === &#39;æˆ‘è¦é»é¤&#39;) {
        await client.replyMessage(event.replyToken, {
          type: &#39;text&#39;,
          text: &#39;è«‹é¸æ“‡å•†å“ï¼šæ‹¿éµã€é»‘å’–å•¡ã€æŠ¹èŒ¶æ‹¿éµ&#39;,
        });
      }
    }
  }
  res.status(200).end();
});

export default router;
</code></pre>
<hr>
<h4 id="4ï¸âƒ£-ä¿®æ”¹-index-js"><a href="#4ï¸âƒ£-ä¿®æ”¹-index-js" class="headerlink" title="4ï¸âƒ£ ä¿®æ”¹ index.js"></a>4ï¸âƒ£ ä¿®æ”¹ index.js</h4><pre><code class="js">import lineRouter from &#39;./routes/line.js&#39;;
app.use(&#39;/line&#39;, lineRouter);
</code></pre>
<hr>
<h4 id="5ï¸âƒ£-ç”¨-ngrok-æ¸¬è©¦"><a href="#5ï¸âƒ£-ç”¨-ngrok-æ¸¬è©¦" class="headerlink" title="5ï¸âƒ£ ç”¨ ngrok æ¸¬è©¦"></a>5ï¸âƒ£ ç”¨ ngrok æ¸¬è©¦</h4><pre><code class="bash">ngrok http 3000
</code></pre>
<p>è¤‡è£½ ngrok URLï¼Œä¾‹å¦‚ <code>https://abcd1234.ngrok.io/line/webhook</code><br>è²¼åˆ° LINE Developers â†’ Webhook URLã€‚</p>
<hr>
<h3 id="ğŸ§ª-Checkpoint"><a href="#ğŸ§ª-Checkpoint" class="headerlink" title="ğŸ§ª Checkpoint"></a>ğŸ§ª Checkpoint</h3><p>âœ… æ‰‹æ©Ÿå‚³ã€Œæˆ‘è¦é»é¤ã€â†’ LINE å›è¦†ã€Œè«‹é¸æ“‡å•†å“ã€<br>âœ… Webhook å¯è§¸ç™¼</p>
<hr>
<h3 id="ğŸ’¡-å»¶ä¼¸"><a href="#ğŸ’¡-å»¶ä¼¸" class="headerlink" title="ğŸ’¡ å»¶ä¼¸"></a>ğŸ’¡ å»¶ä¼¸</h3><ul>
<li>å°‡è¨Šæ¯å…§å®¹å¯«å…¥ MySQLã€‚</li>
<li>å»ºç«‹å•†å“ carousel messageã€‚</li>
</ul>
<hr>

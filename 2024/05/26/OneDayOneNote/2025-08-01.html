<hr>
<h2 id="title-2025-08-01-C4-Model-æ˜¯ä»€éº¼date-2025-11-20-22-20-22categories-OneDayOneNotetags-OneNote-Lineè¨‚å–®ç³»çµ±-description-2025-08-01-C4-Model-æ˜¯ä»€éº¼"><a href="#title-2025-08-01-C4-Model-æ˜¯ä»€éº¼date-2025-11-20-22-20-22categories-OneDayOneNotetags-OneNote-Lineè¨‚å–®ç³»çµ±-description-2025-08-01-C4-Model-æ˜¯ä»€éº¼" class="headerlink" title="title: 2025-08-01 C4 Model æ˜¯ä»€éº¼date: 2025-11-20 22:20:22categories: OneDayOneNotetags:  [OneNote, Lineè¨‚å–®ç³»çµ±]description:  2025-08-01 C4 Model æ˜¯ä»€éº¼"></a>title: 2025-08-01 C4 Model æ˜¯ä»€éº¼<br>date: 2025-11-20 22:20:22<br>categories: OneDayOneNote<br>tags:  [OneNote, Lineè¨‚å–®ç³»çµ±]<br>description:  2025-08-01 C4 Model æ˜¯ä»€éº¼</h2><p>æˆ‘ç”¨ä½ æœ€å®¹æ˜“ç†è§£çš„æ–¹å¼ä¾†èªªæ˜ <strong>C4 Model çš„ã€Œå®¹å™¨åœ–ï¼ˆC4 Container Diagramï¼‰ã€</strong>ï¼Œä½ é¦¬ä¸Šå°±æ‡‚ï¼Œè€Œä¸”èƒ½ç«‹åˆ»æŠŠä½ çš„ä¸‰å° notebook è½‰æˆå°ˆæ¥­æ¶æ§‹åœ–ã€‚</p>
<hr>
<h1 id="ğŸŒŸ-C4-Model-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#ğŸŒŸ-C4-Model-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="ğŸŒŸ C4 Model æ˜¯ä»€éº¼ï¼Ÿ"></a>ğŸŒŸ <strong>C4 Model æ˜¯ä»€éº¼ï¼Ÿ</strong></h1><p>C4 &#x3D; ä¸€å¥—ç•«è»Ÿé«”æ¶æ§‹çš„æ¨™æº–æ–¹æ³•ï¼Œç”± 4 å€‹å±¤ç´šçµ„æˆï¼š</p>
<table>
<thead>
<tr>
<th>å±¤ç´š</th>
<th>åç¨±</th>
<th>å®ƒåœ¨ç•«ä»€éº¼ï¼Ÿ</th>
<th>é©ç”¨å°è±¡</th>
</tr>
</thead>
<tbody><tr>
<td><strong>C1</strong></td>
<td>System Context</td>
<td>ç³»çµ±èˆ‡å¤–éƒ¨çš„é—œä¿‚</td>
<td>è€é—†ã€PMã€å®¢æˆ¶</td>
</tr>
<tr>
<td><strong>C2</strong></td>
<td><strong>Containersï¼ˆå®¹å™¨åœ–ï¼‰</strong></td>
<td>ç³»çµ±çš„ä¸»è¦ã€Œé‹è¡Œå–®å…ƒã€</td>
<td>æ¶æ§‹å¸«ã€å·¥ç¨‹å¸«</td>
</tr>
<tr>
<td><strong>C3</strong></td>
<td>Components</td>
<td>æ¯å€‹å®¹å™¨è£¡çš„ä¸»è¦æ¨¡çµ„</td>
<td>å·¥ç¨‹å¸«</td>
</tr>
<tr>
<td>C4</td>
<td>Code</td>
<td>ç¨‹å¼ç¢¼å±¤ç´š</td>
<td>é–‹ç™¼ã€ç¶­é‹</td>
</tr>
</tbody></table>
<p><strong>ä½ ç¾åœ¨è¦çš„æ˜¯ C2ï¼šå®¹å™¨åœ–ã€‚</strong></p>
<hr>
<h1 id="ğŸ§©-é‚£ã€Œå®¹å™¨ï¼ˆContainerï¼‰ã€åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿ"><a href="#ğŸ§©-é‚£ã€Œå®¹å™¨ï¼ˆContainerï¼‰ã€åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="ğŸ§© é‚£ã€Œå®¹å™¨ï¼ˆContainerï¼‰ã€åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿ"></a>ğŸ§© <strong>é‚£ã€Œå®¹å™¨ï¼ˆContainerï¼‰ã€åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿ</strong></h1><p>ğŸ‘‰ <strong>ä¸æ˜¯ Dockerï¼ä¸æ˜¯ VMï¼ä¸æ˜¯ Linux containerï¼</strong></p>
<p>åœ¨ C4 è£¡ï¼Œ<strong>Container &#x3D; å¯ç¨ç«‹é‹è¡Œçš„æ‡‰ç”¨æˆ–è³‡æ–™åº«</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>Web App</li>
<li>Backend API</li>
<li>Mobile App</li>
<li>Database</li>
<li>Message Queueï¼ˆRedisï¼‰</li>
<li>Lambda Function</li>
<li>å‰ç«¯ SPAï¼ˆVueï¼‰</li>
</ul>
<p>åªè¦æ˜¯ã€Œç¨ç«‹é‹ä½œçš„æ±è¥¿ã€ï¼Œéƒ½å« Containerã€‚</p>
<hr>
<h1 id="ğŸ”¥-ä½ çš„å°ˆæ¡ˆæœ‰å“ªäº›-Containerï¼Ÿ"><a href="#ğŸ”¥-ä½ çš„å°ˆæ¡ˆæœ‰å“ªäº›-Containerï¼Ÿ" class="headerlink" title="ğŸ”¥ ä½ çš„å°ˆæ¡ˆæœ‰å“ªäº› Containerï¼Ÿ"></a>ğŸ”¥ ä½ çš„å°ˆæ¡ˆæœ‰å“ªäº› Containerï¼Ÿ</h1><p>éå¸¸æ¸…æ¥šï¼š</p>
<h3 id="âœ”-å¤–éƒ¨ä½¿ç”¨è€…"><a href="#âœ”-å¤–éƒ¨ä½¿ç”¨è€…" class="headerlink" title="âœ” å¤–éƒ¨ä½¿ç”¨è€…"></a>âœ” å¤–éƒ¨ä½¿ç”¨è€…</h3><ul>
<li>LINE Users</li>
</ul>
<h3 id="âœ”-Backend-Containersï¼ˆMac-1ï¼‰"><a href="#âœ”-Backend-Containersï¼ˆMac-1ï¼‰" class="headerlink" title="âœ” Backend Containersï¼ˆMac #1ï¼‰"></a>âœ” Backend Containersï¼ˆMac #1ï¼‰</h3><ul>
<li><strong>NestJS App</strong>ï¼ˆä¸»è¦å¾Œç«¯ API + Webhook + QueueClientï¼‰</li>
</ul>
<h3 id="âœ”-Frontend-Containersï¼ˆMac-2ï¼‰"><a href="#âœ”-Frontend-Containersï¼ˆMac-2ï¼‰" class="headerlink" title="âœ” Frontend Containersï¼ˆMac #2ï¼‰"></a>âœ” Frontend Containersï¼ˆMac #2ï¼‰</h3><ul>
<li><strong>Vue3 Frontendï¼ˆViteï¼‰</strong>ï¼ˆç€è¦½å™¨è·‘çš„ SPAï¼‰</li>
</ul>
<h3 id="âœ”-Infra-Containersï¼ˆLenovoï¼‰"><a href="#âœ”-Infra-Containersï¼ˆLenovoï¼‰" class="headerlink" title="âœ” Infra Containersï¼ˆLenovoï¼‰"></a>âœ” Infra Containersï¼ˆLenovoï¼‰</h3><ul>
<li><strong>MySQL Database</strong></li>
<li><strong>Redis Queueï¼ˆBull Queueï¼‰</strong></li>
</ul>
<hr>
<h1 id="ğŸ“Œ-C4-å®¹å™¨åœ–æœƒé•·ä»€éº¼æ¨£ï¼Ÿï¼ˆç°¡æ˜“ç‰ˆï¼‰"><a href="#ğŸ“Œ-C4-å®¹å™¨åœ–æœƒé•·ä»€éº¼æ¨£ï¼Ÿï¼ˆç°¡æ˜“ç‰ˆï¼‰" class="headerlink" title="ğŸ“Œ C4 å®¹å™¨åœ–æœƒé•·ä»€éº¼æ¨£ï¼Ÿï¼ˆç°¡æ˜“ç‰ˆï¼‰"></a>ğŸ“Œ <strong>C4 å®¹å™¨åœ–æœƒé•·ä»€éº¼æ¨£ï¼Ÿï¼ˆç°¡æ˜“ç‰ˆï¼‰</strong></h1><p>æˆ‘ç”¨ã€Œä½ çš„ç³»çµ±ã€ç•«çµ¦ä½ ï¼ˆMermaid é¢¨æ ¼ï¼‰ï¼š</p>
<pre><code class="markdown">```mermaid
flowchart LR

%% å¤–éƒ¨
USER([&quot;LINE Users&quot;])

%% Frontend
FE[&quot;Vue3 Frontend (SPA)\nVite Build&quot;]

%% Backend
API[&quot;NestJS Backend API\nProducts, Orders, Webhook, Queue Client&quot;]

%% Database
DB[&quot;MySQL Database\nline_order_db&quot;]

%% Queue
RQ[&quot;Redis (Bull Queue)&quot;]

%% Relationships
USER --&gt;|Webhook| API
FE --&gt;|HTTP API| API
API --&gt;|SQL| DB
API --&gt;|Publish/Consume Jobs| RQ
```
</code></pre>
<hr>
<h1 id="ğŸ§ -å®¹å™¨åœ–ï¼ˆC2ï¼‰è¦è¡¨é”çš„é‡é»"><a href="#ğŸ§ -å®¹å™¨åœ–ï¼ˆC2ï¼‰è¦è¡¨é”çš„é‡é»" class="headerlink" title="ğŸ§  å®¹å™¨åœ–ï¼ˆC2ï¼‰è¦è¡¨é”çš„é‡é»"></a>ğŸ§  å®¹å™¨åœ–ï¼ˆC2ï¼‰è¦è¡¨é”çš„é‡é»</h1><h3 id="1-æœ‰å“ªäº›å®¹å™¨ï¼ˆé‚è¼¯é‹ä½œå–®ä½ï¼‰ï¼Ÿ"><a href="#1-æœ‰å“ªäº›å®¹å™¨ï¼ˆé‚è¼¯é‹ä½œå–®ä½ï¼‰ï¼Ÿ" class="headerlink" title="1. æœ‰å“ªäº›å®¹å™¨ï¼ˆé‚è¼¯é‹ä½œå–®ä½ï¼‰ï¼Ÿ"></a>1. <strong>æœ‰å“ªäº›å®¹å™¨ï¼ˆé‚è¼¯é‹ä½œå–®ä½ï¼‰ï¼Ÿ</strong></h3><ul>
<li>Vue å‰ç«¯</li>
<li>NestJS å¾Œç«¯</li>
<li>MySQL</li>
<li>Redis</li>
<li>å¤–éƒ¨ç³»çµ±ï¼ˆLINEï¼‰</li>
</ul>
<h3 id="2-å®¹å™¨ä¹‹é–“å¦‚ä½•äº’å‹•ï¼Ÿ"><a href="#2-å®¹å™¨ä¹‹é–“å¦‚ä½•äº’å‹•ï¼Ÿ" class="headerlink" title="2. å®¹å™¨ä¹‹é–“å¦‚ä½•äº’å‹•ï¼Ÿ"></a>2. <strong>å®¹å™¨ä¹‹é–“å¦‚ä½•äº’å‹•ï¼Ÿ</strong></h3><ul>
<li>LINE â†’ Webhook â†’ NestJS</li>
<li>Vue â†’ API â†’ NestJS</li>
<li>NestJS â†’ MySQL</li>
<li>NestJS â†’ Redis Queue</li>
</ul>
<h3 id="3-ä¸ç”¨ç•«-UIã€é¡åˆ¥ã€æŠ€è¡“ç´°ç¯€"><a href="#3-ä¸ç”¨ç•«-UIã€é¡åˆ¥ã€æŠ€è¡“ç´°ç¯€" class="headerlink" title="3. ä¸ç”¨ç•« UIã€é¡åˆ¥ã€æŠ€è¡“ç´°ç¯€"></a>3. <strong>ä¸ç”¨ç•« UIã€é¡åˆ¥ã€æŠ€è¡“ç´°ç¯€</strong></h3><p>åªç•«ï¼š<br>âœ” å®¹å™¨<br>âœ” è³‡æ–™æµ<br>âœ” ç›¸ä¾æ€§</p>
<hr>
<h1 id="ğŸ¯-é‡é»ç¸½çµï¼ˆè¶…å¥½æ‡‚ï¼‰"><a href="#ğŸ¯-é‡é»ç¸½çµï¼ˆè¶…å¥½æ‡‚ï¼‰" class="headerlink" title="ğŸ¯ é‡é»ç¸½çµï¼ˆè¶…å¥½æ‡‚ï¼‰"></a>ğŸ¯ é‡é»ç¸½çµï¼ˆè¶…å¥½æ‡‚ï¼‰</h1><ul>
<li><strong>C2 &#x3D; å®¹å™¨åœ– &#x3D; æ•´å€‹ç³»çµ±çš„éª¨æ¶</strong></li>
<li>ç”¨ä¾†æºé€šã€Œæœ‰å“ªäº›æœå‹™ã€æ€éº¼é€£ã€è² è²¬ä»€éº¼ã€</li>
<li>æ¯”ä½ å‰›ç•«çš„ flowchart æ›´æŠ½è±¡ã€è¦å‰‡æ›´æ¨™æº–ã€çµ¦æ¶æ§‹å¸«çœ‹çš„</li>
</ul>
<hr>
<h1 id="ğŸš€-æƒ³è®“ä½ çš„æ¶æ§‹æ–‡ä»¶æ›´å°ˆæ¥­ï¼Ÿ"><a href="#ğŸš€-æƒ³è®“ä½ çš„æ¶æ§‹æ–‡ä»¶æ›´å°ˆæ¥­ï¼Ÿ" class="headerlink" title="ğŸš€ æƒ³è®“ä½ çš„æ¶æ§‹æ–‡ä»¶æ›´å°ˆæ¥­ï¼Ÿ"></a>ğŸš€ æƒ³è®“ä½ çš„æ¶æ§‹æ–‡ä»¶æ›´å°ˆæ¥­ï¼Ÿ</h1><p>æˆ‘å¯ä»¥å¹«ä½ æ¥è‘—ç”¢ç”Ÿï¼š</p>
<h3 id="âœ”-åŒä¸€å¥—ç³»çµ±çš„-C1ï¼ˆContextï¼‰"><a href="#âœ”-åŒä¸€å¥—ç³»çµ±çš„-C1ï¼ˆContextï¼‰" class="headerlink" title="âœ” åŒä¸€å¥—ç³»çµ±çš„ C1ï¼ˆContextï¼‰"></a>âœ” åŒä¸€å¥—ç³»çµ±çš„ C1ï¼ˆContextï¼‰</h3><h3 id="âœ”-C2ï¼ˆContainerï¼Œä½ å·²ç¶“é–‹å§‹äº†ï¼‰"><a href="#âœ”-C2ï¼ˆContainerï¼Œä½ å·²ç¶“é–‹å§‹äº†ï¼‰" class="headerlink" title="âœ” C2ï¼ˆContainerï¼Œä½ å·²ç¶“é–‹å§‹äº†ï¼‰"></a>âœ” C2ï¼ˆContainerï¼Œä½ å·²ç¶“é–‹å§‹äº†ï¼‰</h3><h3 id="âœ”-C3ï¼ˆNestJS-åˆ†æˆ-Products-Orders-Webhook-Queue-çš„-Component-Diagramï¼‰"><a href="#âœ”-C3ï¼ˆNestJS-åˆ†æˆ-Products-Orders-Webhook-Queue-çš„-Component-Diagramï¼‰" class="headerlink" title="âœ” C3ï¼ˆNestJS åˆ†æˆ Products &#x2F; Orders &#x2F; Webhook &#x2F; Queue çš„ Component Diagramï¼‰"></a>âœ” C3ï¼ˆNestJS åˆ†æˆ Products &#x2F; Orders &#x2F; Webhook &#x2F; Queue çš„ Component Diagramï¼‰</h3><h3 id="âœ”-C4ï¼ˆç¨‹å¼ç¢¼å±¤ç´šï¼‰"><a href="#âœ”-C4ï¼ˆç¨‹å¼ç¢¼å±¤ç´šï¼‰" class="headerlink" title="âœ” C4ï¼ˆç¨‹å¼ç¢¼å±¤ç´šï¼‰"></a>âœ” C4ï¼ˆç¨‹å¼ç¢¼å±¤ç´šï¼‰</h3><p>ä½ è¦ç¹¼çºŒç•« C1 é‚„æ˜¯é€² C2 å®Œæ•´ç‰ˆï¼Ÿ</p>

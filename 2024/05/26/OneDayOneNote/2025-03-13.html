<hr>
<h2 id="title-2025-03-13-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„date-2025-09-06-23-10-12tags-Javascript-Vue-description-2025-03-13-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„"><a href="#title-2025-03-13-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„date-2025-09-06-23-10-12tags-Javascript-Vue-description-2025-03-13-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„" class="headerlink" title="title: 2025-03-13-Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„date: 2025-09-06 23:10:12tags:  [Javascript,Vue]description:  2025-03-13-Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„"></a>title: 2025-03-13-Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„<br>date: 2025-09-06 23:10:12<br>tags:  [Javascript,Vue]<br>description:  2025-03-13-Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„</h2><h1 id="2025-03-13-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„"><a href="#2025-03-13-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„" class="headerlink" title="2025-03-13-Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„"></a>2025-03-13-Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„</h1><p>é€™å…©å€‹å•é¡Œå•å¾—éå¸¸å¥½ï¼æˆ‘å€‘ä¾†ä¸€å€‹ä¸€å€‹è§£é‡‹ï¼Œä¿è­‰ä½ å¾åº•å±¤åŸç†å®Œå…¨ç†è§£ï¼š</p>
<hr>
<h2 id="âœ…-1-map-æ˜¯-Leaflet-åœ°åœ–è¦æ›è¼‰çš„ä½ç½®-â€”-ä»€éº¼å«ã€Œæ’å…¥-DOMã€ï¼Ÿæ’å…¥å¾Œé•·æ€æ¨£ï¼Ÿ"><a href="#âœ…-1-map-æ˜¯-Leaflet-åœ°åœ–è¦æ›è¼‰çš„ä½ç½®-â€”-ä»€éº¼å«ã€Œæ’å…¥-DOMã€ï¼Ÿæ’å…¥å¾Œé•·æ€æ¨£ï¼Ÿ" class="headerlink" title="âœ… 1. #map æ˜¯ Leaflet åœ°åœ–è¦æ›è¼‰çš„ä½ç½® â€” ä»€éº¼å«ã€Œæ’å…¥ DOMã€ï¼Ÿæ’å…¥å¾Œé•·æ€æ¨£ï¼Ÿ"></a>âœ… 1. <code>#map</code> æ˜¯ Leaflet åœ°åœ–è¦æ›è¼‰çš„ä½ç½® â€” ä»€éº¼å«ã€Œæ’å…¥ DOMã€ï¼Ÿæ’å…¥å¾Œé•·æ€æ¨£ï¼Ÿ</h2><h3 id="ğŸ”-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„ï¼Ÿ"><a href="#ğŸ”-Leaflet-æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„ï¼Ÿ" class="headerlink" title="ğŸ” Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„ï¼Ÿ"></a>ğŸ” Leaflet æ˜¯å¦‚ä½•ã€Œæ’å…¥åœ°åœ–ã€çš„ï¼Ÿ</h3><p>ç•¶ä½ åŸ·è¡Œé€™æ®µï¼š</p>
<pre><code class="js">const map = L.map(&#39;map&#39;).setView([20, 0], 2)
</code></pre>
<p>Leaflet æœƒå» <strong>å°‹æ‰¾é€™å€‹ DOM å…ƒç´ ï¼š</strong></p>
<pre><code class="html">&lt;div id=&quot;map&quot;&gt;&lt;/div&gt;
</code></pre>
<p>ç„¶å¾Œå®ƒå°±æœƒç”¨ JavaScript <strong>å‹•æ…‹åœ°æ”¹å¯«é€™å€‹ <code>&lt;div&gt;</code>ï¼Œåœ¨è£¡é¢æ’å…¥ä¸€å † HTML å…ƒç´ ï¼ˆé‚„æœƒåŠ ä¸Šæ¨£å¼ã€å½±åƒã€åœ–å±¤ç­‰ï¼‰ä¾†é¡¯ç¤ºåœ°åœ–ã€‚</strong></p>
<hr>
<h3 id="ğŸ”-æ’å…¥ä¹‹å¾Œï¼Œ-map-è£¡é¢é•·æ€æ¨£ï¼Ÿ"><a href="#ğŸ”-æ’å…¥ä¹‹å¾Œï¼Œ-map-è£¡é¢é•·æ€æ¨£ï¼Ÿ" class="headerlink" title="ğŸ” æ’å…¥ä¹‹å¾Œï¼Œ#map è£¡é¢é•·æ€æ¨£ï¼Ÿ"></a>ğŸ” æ’å…¥ä¹‹å¾Œï¼Œ<code>#map</code> è£¡é¢é•·æ€æ¨£ï¼Ÿ</h3><p>ä¾‹å¦‚åŸæœ¬æ˜¯ï¼š</p>
<pre><code class="html">&lt;div id=&quot;map&quot;&gt;&lt;/div&gt;
</code></pre>
<p>åŸ·è¡Œå¾Œæœƒè®Šæˆé€™æ¨£ï¼š</p>
<pre><code class="html">&lt;div id=&quot;map&quot; class=&quot;leaflet-container leaflet-touch leaflet-fade-anim ...&quot; style=&quot;position: relative;&quot;&gt;
  &lt;div class=&quot;leaflet-pane leaflet-map-pane&quot;&gt;
    &lt;div class=&quot;leaflet-pane leaflet-tile-pane&quot;&gt;
      &lt;div class=&quot;leaflet-layer&quot;&gt;
        &lt;div class=&quot;leaflet-tile-container leaflet-zoom-animated&quot;&gt;
          &lt;img src=&quot;https://tile.openstreetmap.org/2/1/1.png&quot; ...&gt;
          &lt;img src=&quot;https://tile.openstreetmap.org/2/2/1.png&quot; ...&gt;
          ...
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;leaflet-pane leaflet-overlay-pane&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;leaflet-pane leaflet-shadow-pane&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;leaflet-pane leaflet-marker-pane&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;leaflet-pane leaflet-tooltip-pane&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;leaflet-pane leaflet-popup-pane&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;

  &lt;!-- æ§åˆ¶åˆ—ã€ç¸®æ”¾æŒ‰éˆ•ç­‰ç­‰ --&gt;
  &lt;div class=&quot;leaflet-control-container&quot;&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Leaflet å¹«ä½ åšäº†éå¸¸å¤šäº‹ï¼š</p>
<ul>
<li>åŠ  tile åœ–ç‰‡ï¼ˆåœ°åœ–åˆ‡ç‰‡ï¼‰</li>
<li>åŠ  marker åœ–å±¤</li>
<li>åŠ ç¸®æ”¾æŒ‰éˆ•</li>
<li>åŠ å‹•ç•«æ•ˆæœ</li>
<li>åŠ äº‹ä»¶è™•ç†ï¼ˆæ»‘é¼ æ‹–æ‹‰ã€æ»¾è¼ªæ”¾å¤§ï¼‰</li>
</ul>
<p>é€™å°±æ˜¯æ‰€è¬‚çš„ã€Œåœ°åœ–è¢«æ’å…¥åˆ°é€™å€‹ DOM è£¡é¢ã€ã€‚</p>
<hr>
<h2 id="âœ…-2-window-L-ç‚ºä»€éº¼ä»£è¡¨-Leaflet-æ²’è¼‰å…¥ï¼Ÿ"><a href="#âœ…-2-window-L-ç‚ºä»€éº¼ä»£è¡¨-Leaflet-æ²’è¼‰å…¥ï¼Ÿ" class="headerlink" title="âœ… 2. !window.L ç‚ºä»€éº¼ä»£è¡¨ Leaflet æ²’è¼‰å…¥ï¼Ÿ"></a>âœ… 2. <code>!window.L</code> ç‚ºä»€éº¼ä»£è¡¨ Leaflet æ²’è¼‰å…¥ï¼Ÿ</h2><h3 id="ğŸ”-L-æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼æ˜¯-Leafletï¼Ÿ"><a href="#ğŸ”-L-æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼æ˜¯-Leafletï¼Ÿ" class="headerlink" title="ğŸ” L æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼æ˜¯ Leafletï¼Ÿ"></a>ğŸ” <code>L</code> æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼æ˜¯ Leafletï¼Ÿ</h3><p>ç•¶ä½ ç”¨ <strong>CDN å¼•å…¥ Leaflet æ™‚</strong>ï¼š</p>
<pre><code class="html">&lt;script src=&quot;https://unpkg.com/leaflet@1.9.4/dist/leaflet.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>é€™æ”¯ JS è£¡é¢æœƒè‡ªå‹•æŠŠ <strong><code>L</code> è¨»å†Šæˆå…¨åŸŸè®Šæ•¸</strong>ï¼Œä¸¦æŠŠæ‰€æœ‰ Leaflet çš„åŠŸèƒ½æ”¾é€²é€™å€‹ç‰©ä»¶è£¡é¢ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="js">console.log(window.L) // =&gt; Leaflet ç‰©ä»¶
</code></pre>
<p>ä½ å¯ä»¥è©¦è‘—åˆ—å°å‡ºä¾†çœ‹çœ‹ï¼š</p>
<pre><code class="js">console.log(L)
</code></pre>
<p>ä½ æœƒçœ‹åˆ°åƒé€™æ¨£ï¼š</p>
<pre><code class="js">{
  map: Æ’,         // L.map(...)
  marker: Æ’,      // L.marker(...)
  tileLayer: Æ’,   // L.tileLayer(...)
  icon: Æ’,        // L.icon(...)
  ...
}
</code></pre>
<hr>
<h3 id="âœ…-æ‰€ä»¥-window-L-çš„æ„æ€æ˜¯ï¼š"><a href="#âœ…-æ‰€ä»¥-window-L-çš„æ„æ€æ˜¯ï¼š" class="headerlink" title="âœ… æ‰€ä»¥ !window.L çš„æ„æ€æ˜¯ï¼š"></a>âœ… æ‰€ä»¥ <code>!window.L</code> çš„æ„æ€æ˜¯ï¼š</h3><ul>
<li>ã€Œå¦‚æœ <code>window.L</code> ä¸å­˜åœ¨ã€ï¼ˆä¹Ÿå°±æ˜¯ Leaflet æ²’æœ‰æ­£ç¢ºè¼‰å…¥ï¼‰</li>
<li>å°±é¡¯ç¤ºéŒ¯èª¤æˆ–ä¸­æ­¢ç¨‹å¼</li>
</ul>
<pre><code class="js">if (!window.L) {
  throw new Error(&#39;Leaflet å°šæœªè¼‰å…¥&#39;)
}
</code></pre>
<p>é€™æ¨£åšçš„ç›®çš„æ˜¯é¿å…å¾Œé¢ç”¨ <code>L.map(...)</code> æ™‚å ±éŒ¯ <code>L is not defined</code>ã€‚</p>
<hr>
<h2 id="âœ…-è£œå……ï¼šç‚ºä»€éº¼æˆ‘å€‘ä¸ç”¨-import-L-from-leaflet-ï¼Ÿ"><a href="#âœ…-è£œå……ï¼šç‚ºä»€éº¼æˆ‘å€‘ä¸ç”¨-import-L-from-leaflet-ï¼Ÿ" class="headerlink" title="âœ… è£œå……ï¼šç‚ºä»€éº¼æˆ‘å€‘ä¸ç”¨ import L from &#39;leaflet&#39;ï¼Ÿ"></a>âœ… è£œå……ï¼šç‚ºä»€éº¼æˆ‘å€‘ä¸ç”¨ <code>import L from &#39;leaflet&#39;</code>ï¼Ÿ</h2><p>å› ç‚ºä½ é¸æ“‡äº† <strong>CDN æ¨¡å¼ï¼ˆä¸ç”¨ npm å®‰è£ï¼‰</strong>ï¼Œæ‰€ä»¥ï¼š</p>
<ul>
<li>æˆ‘å€‘ä¸å¯« <code>import</code></li>
<li>è€Œæ˜¯ç”¨ <code>&lt;script src=&quot;...&quot;&gt;</code> è¼‰å…¥ Leaflet</li>
<li>é€™æœƒåœ¨å…¨åŸŸè‡ªå‹•å»ºç«‹ <code>window.L</code></li>
</ul>
<p>é€™ç¨®åšæ³•å¸¸è¦‹æ–¼ï¼š</p>
<ul>
<li>ç·´ç¿’ã€æ•™å­¸</li>
<li>ç„¡éœ€æ‰“åŒ…çš„å°ˆæ¡ˆï¼ˆä¾‹å¦‚ Replitã€CodePenï¼‰</li>
</ul>
<hr>
<h3 id="æƒ³è¦è‡ªå·±è©¦çœ‹çœ‹ï¼Ÿ"><a href="#æƒ³è¦è‡ªå·±è©¦çœ‹çœ‹ï¼Ÿ" class="headerlink" title="æƒ³è¦è‡ªå·±è©¦çœ‹çœ‹ï¼Ÿ"></a>æƒ³è¦è‡ªå·±è©¦çœ‹çœ‹ï¼Ÿ</h3><p>ä½ å¯ä»¥æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼Œåœ¨ <code>map</code> è¼‰å…¥å¾Œæ‰“ï¼š</p>
<pre><code class="js">console.log(document.getElementById(&#39;map&#39;).innerHTML)
</code></pre>
<p>å°±å¯ä»¥çœ‹åˆ° Leaflet æ³¨å…¥çš„ HTML çµæ§‹ã€‚</p>
<hr>

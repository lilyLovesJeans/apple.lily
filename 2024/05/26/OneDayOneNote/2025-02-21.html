<hr>
<h2 id="title-2025-02-21-練習非同步處理與除錯date-2025-09-06-22-23-31tags-Javascript-Vue-description-2025-02-21-練習非同步處理與除錯"><a href="#title-2025-02-21-練習非同步處理與除錯date-2025-09-06-22-23-31tags-Javascript-Vue-description-2025-02-21-練習非同步處理與除錯" class="headerlink" title="title: 2025-02-21-練習非同步處理與除錯date: 2025-09-06 22:23:31tags:  [Javascript,Vue]description:  2025-02-21-練習非同步處理與除錯"></a>title: 2025-02-21-練習非同步處理與除錯<br>date: 2025-09-06 22:23:31<br>tags:  [Javascript,Vue]<br>description:  2025-02-21-練習非同步處理與除錯</h2><h1 id="2025-02-21-練習非同步處理與除錯"><a href="#2025-02-21-練習非同步處理與除錯" class="headerlink" title="2025-02-21-練習非同步處理與除錯"></a>2025-02-21-練習非同步處理與除錯</h1><h3 id="✅-練習目標："><a href="#✅-練習目標：" class="headerlink" title="✅ 練習目標："></a>✅ 練習目標：</h3><p>你將會手動寫一段 <code>fetch()</code> 程式，不用 <code>async/await</code>，直接用 <code>.then()</code> 來處理 <code>Promise</code>，並加上 <code>console.log()</code> 做除錯。</p>
<hr>
<h3 id="🧪-練習範例：用-then-查詢-CWA-天氣資料"><a href="#🧪-練習範例：用-then-查詢-CWA-天氣資料" class="headerlink" title="🧪 練習範例：用 .then() 查詢 CWA 天氣資料"></a>🧪 練習範例：用 <code>.then()</code> 查詢 CWA 天氣資料</h3><p>請貼到 Vue <code>&lt;script setup&gt;</code> 裡試試看這段程式碼（只要你有 API Key）：</p>
<pre><code class="vue">&lt;script setup&gt;
const apiKey = &#39;你的API金鑰&#39;

function testApiWithThen() {
  const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${apiKey}`

  console.log(&#39;開始 fetch...&#39;) // 除錯點1：確認有執行

  fetch(url)
    .then(response =&gt; {
      console.log(&#39;取得 response ✔️&#39;, response) // 除錯點2
      return response.json()
    })
    .then(data =&gt; {
      console.log(&#39;取得資料 ✅&#39;, data) // 除錯點3
    })
    .catch(error =&gt; {
      console.error(&#39;❌ 發生錯誤&#39;, error) // 除錯點4
    })
}

// 頁面載入時先測試一次
testApiWithThen()
&lt;/script&gt;
</code></pre>
<hr>
<h3 id="🧠-除錯思考方式："><a href="#🧠-除錯思考方式：" class="headerlink" title="🧠 除錯思考方式："></a>🧠 除錯思考方式：</h3><ol>
<li><strong>沒顯示任何 log？</strong> → 代表 <code>testApiWithThen()</code> 沒有被呼叫。</li>
<li><strong><code>.then()</code> 沒執行？</strong> → 可能是 <code>fetch</code> 本身錯誤（URL 或網路）。</li>
<li><strong>資料格式錯誤？</strong> → 檢查 <code>.json()</code> 的結構。</li>
<li><strong>CORS 或 API Key 錯誤？</strong> → 錯誤會出現在 <code>catch()</code> 裡。</li>
</ol>
<hr>
<h3 id="✅-練習方向"><a href="#✅-練習方向" class="headerlink" title="✅ 練習方向"></a>✅ 練習方向</h3><ol>
<li><strong>把 <code>url</code> 改錯一點</strong> 看 <code>.catch()</code> 是否有捕捉。</li>
<li><strong>故意把 <code>apiKey</code> 清掉或打錯</strong> 看錯誤訊息。</li>
<li>**印出 <code>data.records</code>**，你就能知道天氣資料是否有拿到。</li>
</ol>
<hr>

<hr>
<h2 id="title-2025-02-12-JavaScript-ç³»åˆ—å…«ï¼šç¬¬6èª²-â”€â”€-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06date-2025-09-06-22-06-32tags-Javascript-Vue-description-2025-02-12-JavaScript-ç³»åˆ—å…«ï¼šç¬¬6èª²-â”€â”€-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"><a href="#title-2025-02-12-JavaScript-ç³»åˆ—å…«ï¼šç¬¬6èª²-â”€â”€-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06date-2025-09-06-22-06-32tags-Javascript-Vue-description-2025-02-12-JavaScript-ç³»åˆ—å…«ï¼šç¬¬6èª²-â”€â”€-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06" class="headerlink" title="title: 2025-02-12- JavaScript ç³»åˆ—å…«ï¼šç¬¬6èª² â”€â”€ å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06date: 2025-09-06 22:06:32tags:  [Javascript,Vue]description:  2025-02-12- JavaScript ç³»åˆ—å…«ï¼šç¬¬6èª² â”€â”€ å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"></a>title: 2025-02-12- JavaScript ç³»åˆ—å…«ï¼šç¬¬6èª² â”€â”€ å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06<br>date: 2025-09-06 22:06:32<br>tags:  [Javascript,Vue]<br>description:  2025-02-12- JavaScript ç³»åˆ—å…«ï¼šç¬¬6èª² â”€â”€ å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06</h2><h1 id="2025-02-12-JavaScript-ç³»åˆ—å…«ï¼šç¬¬6èª²-â”€â”€-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"><a href="#2025-02-12-JavaScript-ç³»åˆ—å…«ï¼šç¬¬6èª²-â”€â”€-å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06" class="headerlink" title="2025-02-12- JavaScript ç³»åˆ—å…«ï¼šç¬¬6èª² â”€â”€ å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06"></a>2025-02-12- JavaScript ç³»åˆ—å…«ï¼šç¬¬6èª² â”€â”€ å¤©æ°£æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼-æ­¥é©Ÿ06</h1><p>ä»¥ä¸‹æ˜¯æ•´åˆå¾Œçš„ <code>WeatherQuery.vue</code>ï¼ŒåŠ å…¥äº†ï¼š</p>
<ol>
<li>âœ… <strong>å‹•æ…‹æŠ“å–æ‰€æœ‰ç¸£å¸‚åç¨±ï¼ˆfrom CWA APIï¼‰</strong></li>
<li>âœ… æ ¹æ“šé¸æ“‡çš„ç¸£å¸‚é¡¯ç¤ºå¤©æ°£è³‡è¨Š</li>
<li>âœ… <strong>èƒŒæ™¯é¡è‰²éš¨å¤©æ°£è®ŠåŒ–ï¼ˆæ™´ã€é™°ã€é›·é›¨ï¼‰</strong></li>
<li>âœ… <strong>åœ–ç¤ºä¹Ÿæœƒéš¨å¤©æ°£è®ŠåŒ–</strong></li>
<li>âœ… <strong>RWD éŸ¿æ‡‰å¼è¨­è¨ˆ</strong></li>
</ol>
<hr>
<h3 id="âœ…-WeatherQuery-vue"><a href="#âœ…-WeatherQuery-vue" class="headerlink" title="âœ… WeatherQuery.vue"></a>âœ… <code>WeatherQuery.vue</code></h3><pre><code class="vue">&lt;template&gt;
  &lt;div :class=&quot;[&#39;weather-app&#39;, weatherClass]&quot;&gt;
    &lt;div class=&quot;container&quot;&gt;
      &lt;h1&gt;å¤©æ°£æŸ¥è©¢&lt;/h1&gt;

      &lt;select v-model=&quot;selectedCity&quot; @change=&quot;fetchWeather&quot;&gt;
        &lt;option v-for=&quot;city in cities&quot; :key=&quot;city&quot; :value=&quot;city&quot;&gt;{{ city }}&lt;/option&gt;
      &lt;/select&gt;

      &lt;div v-if=&quot;weatherData&quot; class=&quot;weather-info&quot;&gt;
        &lt;img :src=&quot;weatherIcon&quot; alt=&quot;Weather Icon&quot; class=&quot;weather-icon&quot; /&gt;
        &lt;p&gt;&lt;strong&gt;å¤©æ°£ç¾è±¡ï¼š&lt;/strong&gt;{{ weatherData.weather }}&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;æœ€é«˜æº«åº¦ï¼š&lt;/strong&gt;{{ weatherData.maxT }} Â°C&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;æœ€ä½æº«åº¦ï¼š&lt;/strong&gt;{{ weatherData.minT }} Â°C&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;é™é›¨æ©Ÿç‡ï¼š&lt;/strong&gt;{{ weatherData.pop }}%&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted, watch } from &#39;vue&#39;

const apiKey = &#39;ä½ çš„API_KEY&#39; // &lt;&lt;--- è«‹æ›¿æ›ç‚ºä½ è¨»å†Šçš„ CWA API Key
const cities = ref([])
const selectedCity = ref(&#39;&#39;)
const weatherData = ref(null)
const weatherClass = ref(&#39;&#39;)
const weatherIcon = ref(&#39;&#39;)

// å–å¾—åŸå¸‚æ¸…å–®
const fetchCities = async () =&gt; {
  const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${apiKey}`
  const res = await fetch(url)
  const data = await res.json()
  cities.value = data.records.location.map(loc =&gt; loc.locationName)
  selectedCity.value = cities.value[0]
}

// æ ¹æ“šç¸£å¸‚æŠ“å–å¤©æ°£è³‡è¨Š
const fetchWeather = async () =&gt; {
  const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${apiKey}`
  const res = await fetch(url)
  const data = await res.json()
  const cityData = data.records.location.find(loc =&gt; loc.locationName === selectedCity.value)

  if (cityData) {
    const weather = cityData.weatherElement.find(e =&gt; e.elementName === &#39;Wx&#39;).time[0].parameter.parameterName
    const maxT = cityData.weatherElement.find(e =&gt; e.elementName === &#39;MaxT&#39;).time[0].parameter.parameterName
    const minT = cityData.weatherElement.find(e =&gt; e.elementName === &#39;MinT&#39;).time[0].parameter.parameterName
    const pop = cityData.weatherElement.find(e =&gt; e.elementName === &#39;PoP&#39;).time[0].parameter.parameterName

    weatherData.value = { weather, maxT, minT, pop }
    updateWeatherStyle(weather)
  }
}

// è¨­å®šèƒŒæ™¯èˆ‡åœ–ç¤º
const updateWeatherStyle = (weather) =&gt; {
  if (weather.includes(&#39;é›·&#39;)) {
    weatherClass.value = &#39;thunder&#39;
    weatherIcon.value = &#39;https://cdn-icons-png.flaticon.com/512/1146/1146858.png&#39;
  } else if (weather.includes(&#39;é›¨&#39;)) {
    weatherClass.value = &#39;rainy&#39;
    weatherIcon.value = &#39;https://cdn-icons-png.flaticon.com/512/4150/4150897.png&#39;
  } else if (weather.includes(&#39;é›²&#39;) || weather.includes(&#39;é™°&#39;)) {
    weatherClass.value = &#39;cloudy&#39;
    weatherIcon.value = &#39;https://cdn-icons-png.flaticon.com/512/414/414825.png&#39;
  } else {
    weatherClass.value = &#39;sunny&#39;
    weatherIcon.value = &#39;https://cdn-icons-png.flaticon.com/512/869/869869.png&#39;
  }
}

onMounted(() =&gt; {
  fetchCities().then(() =&gt; fetchWeather())
})

watch(selectedCity, fetchWeather)
&lt;/script&gt;

&lt;style scoped&gt;
.weather-app {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  transition: background 0.5s ease;
}

.container {
  background: white;
  padding: 2rem;
  border-radius: 1rem;
  max-width: 400px;
  width: 100%;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

select {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 1rem;
}

.weather-info {
  text-align: center;
}

.weather-icon {
  width: 100px;
  margin-bottom: 1rem;
}

/* RWD */
@media (max-width: 600px) {
  .container {
    padding: 1rem;
  }

  .weather-icon {
    width: 70px;
  }
}

/* èƒŒæ™¯æ¼¸å±¤æ¨£å¼ */
.sunny {
  background: linear-gradient(to bottom, #87CEEB, #ffffff);
}
.cloudy {
  background: linear-gradient(to bottom, #ccc, #eee);
}
.rainy {
  background: linear-gradient(to bottom, #3a3a3a, #666);
}
.thunder {
  background: linear-gradient(to bottom, #000000, #333333);
}
&lt;/style&gt;
</code></pre>
<hr>
<h3 id="ğŸ¯-æé†’äº‹é …"><a href="#ğŸ¯-æé†’äº‹é …" class="headerlink" title="ğŸ¯ æé†’äº‹é …"></a>ğŸ¯ æé†’äº‹é …</h3><ul>
<li><code>apiKey</code> è«‹æ”¹æˆä½ ç”³è«‹çš„é‡‘é‘°ï¼ˆ<a href="https://opendata.cwa.gov.tw/index">è¨»å†Šä¸­å¤®æ°£è±¡å±€</a>ï¼‰</li>
<li>å¤©æ°£åœ–ç¤ºä½¿ç”¨çš„æ˜¯å…è²» Flaticon åœ–ç‰‡ï¼Œå¯æ›¿æ›æˆè‡ªå·±çš„åœ–æˆ–æœ¬åœ°åœ–ç‰‡</li>
<li>è‹¥æƒ³ç”¨ <code>localStorage</code> è¨˜ä½åŸå¸‚é¸æ“‡ï¼Œä¹Ÿå¯ä»¥åŠ ä¸Š</li>
</ul>
<hr>

<hr>
<h2 id="title-2025-06-18-é€é-192-168-0-103-4000-api-chat-å‘-Mac-B-ç™¼é€è«‹æ±‚-å›è¦†ï¼šâš ï¸-éŒ¯èª¤ï¼šFailed-to-fetchdate-2025-10-01-23-37-51categories-OneDayOneNotetags-MVP-MCP-Node-description-2025-06-18-é€é-192-168-0-103-4000-api-chat-å‘-Mac-B-ç™¼é€è«‹æ±‚-å›è¦†ï¼šâš ï¸-éŒ¯èª¤ï¼šFailed-to-fetch"><a href="#title-2025-06-18-é€é-192-168-0-103-4000-api-chat-å‘-Mac-B-ç™¼é€è«‹æ±‚-å›è¦†ï¼šâš ï¸-éŒ¯èª¤ï¼šFailed-to-fetchdate-2025-10-01-23-37-51categories-OneDayOneNotetags-MVP-MCP-Node-description-2025-06-18-é€é-192-168-0-103-4000-api-chat-å‘-Mac-B-ç™¼é€è«‹æ±‚-å›è¦†ï¼šâš ï¸-éŒ¯èª¤ï¼šFailed-to-fetch" class="headerlink" title="title: 2025-06-18 é€é 192.168.0.103:4000&#x2F;api&#x2F;chat å‘ Mac B ç™¼é€è«‹æ±‚ å›è¦†ï¼šâš ï¸ éŒ¯èª¤ï¼šFailed to fetchdate: 2025-10-01 23:37:51categories: OneDayOneNotetags:  [MVP,MCP,Node]description: 2025-06-18 é€é 192.168.0.103:4000&#x2F;api&#x2F;chat å‘ Mac B ç™¼é€è«‹æ±‚ å›è¦†ï¼šâš ï¸ éŒ¯èª¤ï¼šFailed to fetch"></a>title: 2025-06-18 é€é 192.168.0.103:4000&#x2F;api&#x2F;chat å‘ Mac B ç™¼é€è«‹æ±‚ å›è¦†ï¼šâš ï¸ éŒ¯èª¤ï¼šFailed to fetch<br>date: 2025-10-01 23:37:51<br>categories: OneDayOneNote<br>tags:  [MVP,MCP,Node]<br>description: 2025-06-18 é€é 192.168.0.103:4000&#x2F;api&#x2F;chat å‘ Mac B ç™¼é€è«‹æ±‚ å›è¦†ï¼šâš ï¸ éŒ¯èª¤ï¼šFailed to fetch</h2><h2 id="2025-06-18-é€é-192-168-0-103-4000-api-chat-å‘-Mac-B-ç™¼é€è«‹æ±‚-å›è¦†ï¼šâš ï¸-éŒ¯èª¤ï¼šFailed-to-fetch"><a href="#2025-06-18-é€é-192-168-0-103-4000-api-chat-å‘-Mac-B-ç™¼é€è«‹æ±‚-å›è¦†ï¼šâš ï¸-éŒ¯èª¤ï¼šFailed-to-fetch" class="headerlink" title="2025-06-18 é€é 192.168.0.103:4000&#x2F;api&#x2F;chat å‘ Mac B ç™¼é€è«‹æ±‚ å›è¦†ï¼šâš ï¸ éŒ¯èª¤ï¼šFailed to fetch"></a>2025-06-18 é€é 192.168.0.103:4000&#x2F;api&#x2F;chat å‘ Mac B ç™¼é€è«‹æ±‚ å›è¦†ï¼šâš ï¸ éŒ¯èª¤ï¼šFailed to fetch</h2><p>å¾ˆå¥½ ğŸ‘ é€™å€‹éŒ¯èª¤ <code>âš ï¸ éŒ¯èª¤ï¼šFailed to fetch</code>ï¼Œä»£è¡¨ <strong>Windows çš„ Vue å‰ç«¯æ²’è¾¦æ³•é€£åˆ° Mac B çš„ MCP Gateway</strong>ã€‚<br>æˆ‘ä¸€æ­¥æ­¥å¹«ä½ æª¢æŸ¥ï¼š</p>
<hr>
<h2 id="âœ…-Step-1ï¼šMac-B-æ˜¯å¦çœŸçš„åœ¨è·‘-MCP-Gatewayï¼Ÿ"><a href="#âœ…-Step-1ï¼šMac-B-æ˜¯å¦çœŸçš„åœ¨è·‘-MCP-Gatewayï¼Ÿ" class="headerlink" title="âœ… Step 1ï¼šMac B æ˜¯å¦çœŸçš„åœ¨è·‘ MCP Gatewayï¼Ÿ"></a>âœ… Step 1ï¼šMac B æ˜¯å¦çœŸçš„åœ¨è·‘ MCP Gatewayï¼Ÿ</h2><p>åœ¨ <strong>Mac B</strong> é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œç¢ºèªç¨‹å¼æœ‰è·‘ï¼š</p>
<pre><code class="bash">lsof -i :4000
</code></pre>
<p>æ‡‰è©²è¦çœ‹åˆ°é¡ä¼¼ï¼š</p>
<pre><code>node   12345 maggie   12u  IPv4 ...  TCP *:4000 (LISTEN)
</code></pre>
<p>é€™è¡¨ç¤º <strong>Mac B çš„ 4000 port æœ‰é–‹æ”¾</strong>ã€‚</p>
<p>å¦‚æœæ²’çœ‹åˆ° â†’ è«‹å…ˆå•Ÿå‹•ï¼š</p>
<pre><code class="bash">node gateway.mjs
</code></pre>
<hr>
<h2 id="âœ…-Step-2ï¼šç¢ºèª-Windows-èƒ½-ping-åˆ°-Mac-B"><a href="#âœ…-Step-2ï¼šç¢ºèª-Windows-èƒ½-ping-åˆ°-Mac-B" class="headerlink" title="âœ… Step 2ï¼šç¢ºèª Windows èƒ½ ping åˆ° Mac B"></a>âœ… Step 2ï¼šç¢ºèª Windows èƒ½ ping åˆ° Mac B</h2><p>åœ¨ Windows çš„çµ‚ç«¯æ©Ÿ (cmd &#x2F; PowerShell) è¼¸å…¥ï¼š</p>
<pre><code class="powershell">ping 192.168.0.103
</code></pre>
<p>æ‡‰è©²è¦çœ‹åˆ°å›è¦†æ™‚é–“ï¼ˆå¹¾æ¯«ç§’ï¼‰ã€‚</p>
<ul>
<li>å¦‚æœæˆåŠŸ â†’ ç¶²è·¯é€£å¾—é€šã€‚</li>
<li>å¦‚æœå¤±æ•— â†’ Windows å’Œ Mac ä¸åœ¨åŒä¸€å€‹å€ç¶²ï¼Œæˆ– Mac é˜²ç«ç‰†æ“‹äº†ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-Step-3ï¼šæ¸¬è©¦-API-æ˜¯å¦èƒ½æ‰“é€š"><a href="#âœ…-Step-3ï¼šæ¸¬è©¦-API-æ˜¯å¦èƒ½æ‰“é€š" class="headerlink" title="âœ… Step 3ï¼šæ¸¬è©¦ API æ˜¯å¦èƒ½æ‰“é€š"></a>âœ… Step 3ï¼šæ¸¬è©¦ API æ˜¯å¦èƒ½æ‰“é€š</h2><p>åœ¨ Windows ä¸Šï¼ˆä¸æ˜¯ Vueï¼Œå…ˆç”¨ curl æ¸¬è©¦ï¼‰ï¼š</p>
<pre><code class="powershell">curl http://192.168.0.103:4000/health
</code></pre>
<p>æ‡‰è©²è¦å¾—åˆ°ï¼š</p>
<pre><code class="json">{&quot;status&quot;:&quot;ok&quot;,&quot;role&quot;:&quot;mcp-gateway&quot;}
</code></pre>
<p>å¦‚æœé€™ä¸€æ­¥ä¸é€š â†’ è¡¨ç¤ºå•é¡Œåœ¨ <strong>Mac é˜²ç«ç‰† &#x2F; ç¶²è·¯è¨­ç½®</strong>ã€‚</p>
<hr>
<h2 id="âœ…-Step-4ï¼šé˜²ç«ç‰†è¨­å®š-Mac-B"><a href="#âœ…-Step-4ï¼šé˜²ç«ç‰†è¨­å®š-Mac-B" class="headerlink" title="âœ… Step 4ï¼šé˜²ç«ç‰†è¨­å®š (Mac B)"></a>âœ… Step 4ï¼šé˜²ç«ç‰†è¨­å®š (Mac B)</h2><p>macOS å¯èƒ½æ“‹ä½äº† <code>node</code>ã€‚</p>
<ol>
<li>åˆ° <strong>ç³»çµ±åå¥½è¨­å®š â†’ å®‰å…¨æ€§èˆ‡éš±ç§ â†’ é˜²ç«ç‰†</strong></li>
<li>é»ã€Œé˜²ç«ç‰†é¸é …ã€</li>
<li>å…è¨± <code>node</code> æ¥æ”¶å‚³å…¥é€£ç·š</li>
</ol>
<hr>
<p>ğŸ“Œ ç¸½çµï¼š</p>
<ul>
<li>å¦‚æœ <strong>Step 2 ping ä¸é€š</strong> â†’ ç¶²è·¯å•é¡Œï¼ˆWi-Fi æˆ–å€ç¶²ä¸åŒï¼‰ã€‚</li>
<li>å¦‚æœ <strong>Step 2 é€šï¼Œä½† Step 3 curl ä¸é€š</strong> â†’ Mac é˜²ç«ç‰†å•é¡Œã€‚</li>
<li>å¦‚æœ <strong>Step 3 curl é€šï¼Œä½† Vue é‚„æ˜¯ Failed to fetch</strong> â†’ é‚£å¯èƒ½æ˜¯ CORSï¼ˆè·¨ä¾†æºè«‹æ±‚é™åˆ¶ï¼‰ï¼Œæˆ‘å¯ä»¥å¹«ä½ åœ¨ gateway.mjs åŠ  <code>CORS</code> æ”¯æ´ã€‚</li>
</ul>
<hr>
<p>C:\Users\lily_&gt;curl <a href="http://192.168.0.103:4000/health">http://192.168.0.103:4000/health</a><br>{â€œstatusâ€:â€okâ€,â€roleâ€:â€mcp-gatewayâ€}<br>C:\Users\lily_&gt;</p>
<p>å®Œç¾ ğŸ‰ é€™è¡¨ç¤º <strong>Windows å·²ç¶“èƒ½æ‰“é€š Mac B çš„ MCP Gateway</strong>ï¼Œæ‰€ä»¥ä¸æ˜¯ç¶²è·¯ã€é˜²ç«ç‰†çš„å•é¡Œã€‚</p>
<p>ğŸ‘‰ é‚£å‰©ä¸‹çš„å”¯ä¸€å¯èƒ½æ˜¯ **CORS (Cross-Origin Resource Sharing, è·¨ä¾†æºè³‡æºå…±äº«)**ã€‚</p>
<hr>
<h2 id="ç‚ºä»€éº¼æœƒå‡ºéŒ¯ï¼Ÿ"><a href="#ç‚ºä»€éº¼æœƒå‡ºéŒ¯ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼æœƒå‡ºéŒ¯ï¼Ÿ"></a>ç‚ºä»€éº¼æœƒå‡ºéŒ¯ï¼Ÿ</h2><ul>
<li>ä½ åœ¨ Windows çš„ Vue å‰ç«¯ (<code>http://localhost:5173</code>)</li>
<li>å»å‘¼å« Mac B (<code>http://192.168.0.103:4000</code>)</li>
<li>å› ç‚ºã€Œä¸åŒä¾†æº (Origin)ã€ â†’ ç€è¦½å™¨å®‰å…¨é™åˆ¶ â†’ <code>Failed to fetch</code>ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-è§£æ³•ï¼šåœ¨-gateway-mjs-åŠ -CORS-æ”¯æ´"><a href="#âœ…-è§£æ³•ï¼šåœ¨-gateway-mjs-åŠ -CORS-æ”¯æ´" class="headerlink" title="âœ… è§£æ³•ï¼šåœ¨ gateway.mjs åŠ  CORS æ”¯æ´"></a>âœ… è§£æ³•ï¼šåœ¨ <code>gateway.mjs</code> åŠ  CORS æ”¯æ´</h2><p>è«‹ç·¨è¼¯ **Mac B çš„ <code>gateway.mjs</code>**ï¼Œåœ¨ Express ä¼ºæœå™¨é‚£æ®µåŠ ä¸Š CORSï¼š</p>
<pre><code class="js">import express from &quot;express&quot;;
import cors from &quot;cors&quot;;

const app = express();
app.use(cors()); // å…è¨±æ‰€æœ‰ä¾†æº
app.use(express.json());

// å¥åº·æª¢æŸ¥
app.get(&quot;/health&quot;, (req, res) =&gt; {
  res.json({ status: &quot;ok&quot;, role: &quot;mcp-gateway&quot; });
});

// Chat API
app.post(&quot;/api/chat&quot;, async (req, res) =&gt; {
  const { provider, messages } = req.body;

  // æ¨¡æ“¬å›è¦†
  res.json({
    provider,
    text: `[mock ${provider}] é€™æ˜¯æ¨¡æ“¬å›è¦†`
  });
});

app.listen(4000, () =&gt; {
  console.log(&quot;ğŸš€ MCP Gateway running on port 4000&quot;);
});
</code></pre>
<hr>
<h2 id="âœ…-æ¸¬è©¦æ–¹å¼"><a href="#âœ…-æ¸¬è©¦æ–¹å¼" class="headerlink" title="âœ… æ¸¬è©¦æ–¹å¼"></a>âœ… æ¸¬è©¦æ–¹å¼</h2><ol>
<li><p>åœ¨ Mac B é‡æ–°å•Ÿå‹• MCP Gatewayï¼š</p>
<pre><code class="bash">node gateway.mjs
</code></pre>
<p>ï¼ˆæˆ– <code>pm2 restart mcp-gateway</code>ï¼‰</p>
</li>
<li><p>åœ¨ Windows æ‰“é–‹ä½ çš„ Vue å‰ç«¯ â†’ è¼¸å…¥è¨Šæ¯ â†’ é»é€å‡º</p>
</li>
</ol>
<p>ğŸ‘‰ é€™æ™‚å€™å°±ä¸æœƒå†å‡ºç¾ <code>Failed to fetch</code>ï¼Œè€Œæ˜¯èƒ½æ‹¿åˆ° <code>[mock openai] é€™æ˜¯æ¨¡æ“¬å›è¦†</code>ã€‚</p>
<hr>
<p>è¦ä¸è¦æˆ‘å¹«ä½ ç›´æ¥æ•´ç†ä¸€å€‹ã€ŒåŠ äº† CORS çš„å®Œæ•´ gateway.mjs ç¯„ä¾‹æª”ã€çµ¦ä½ ï¼Ÿ</p>

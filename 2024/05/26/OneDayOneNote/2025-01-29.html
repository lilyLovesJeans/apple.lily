<hr>
<h2 id="title-2025-01-29-vue3-ref-是什麼date-2025-09-06-20-42-31categories-OneDayOneNotetags-Javascript-Vue-description-2025-01-29-vue3-ref-是什麼"><a href="#title-2025-01-29-vue3-ref-是什麼date-2025-09-06-20-42-31categories-OneDayOneNotetags-Javascript-Vue-description-2025-01-29-vue3-ref-是什麼" class="headerlink" title="title: 2025-01-29-vue3_ref 是什麼date: 2025-09-06 20:42:31categories: OneDayOneNotetags:  [Javascript,Vue]description:  2025-01-29-vue3_ref 是什麼"></a>title: 2025-01-29-vue3_ref 是什麼<br>date: 2025-09-06 20:42:31<br>categories: OneDayOneNote<br>tags:  [Javascript,Vue]<br>description:  2025-01-29-vue3_ref 是什麼</h2><h1 id="2025-01-29-vue3-ref-是什麼"><a href="#2025-01-29-vue3-ref-是什麼" class="headerlink" title="2025-01-29-vue3_ref 是什麼"></a>2025-01-29-vue3_ref 是什麼</h1><p>&#x2F;&#x2F; weightTrackerApp.vue：體重追蹤器<br><template><br>  <div class="p-4 max-w-md mx-auto"><br>    <h1 class="text-2xl font-bold mb-4">體重追蹤器</h1></p>
<pre><code>&lt;!-- 輸入表單--&gt;
&lt;form @submit.prevent=&quot;addRecord&quot; class=&quot;space-y-2 mb-4&quot;&gt;
    &lt;div&gt;
        &lt;label&gt;日期：&lt;/label&gt;
        &lt;input type=&quot;date&quot; v-model=&quot;newRecord.date&quot;&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;label&gt;體重(kg):&lt;/label&gt;
        &lt;input type=&quot;number&quot; v-model.number=&quot;newRecord.weight&quot; class=&quot;border px-2 py-1&quot; required /&gt;
    &lt;/div&gt;
    &lt;button type=&quot;submit&quot; class=&quot;bg-blue-500 text-white px-4 py-1 rounded&quot;&gt;新增&lt;/button&gt;
&lt;/form&gt;

&lt;!-- 清單--&gt;
&lt;ul class=&quot;space-y-2&quot;&gt;
    &lt;li v-for=&quot;(record, index) in sortedRecords&quot; :key=&quot;record.id&quot; class=&quot;flex justify-between items-center border p-2&quot;&gt;
    &lt;span&gt;{{ record.date }} - {{ record.weight }}kg&lt;/span&gt;
    &lt;button @click=&quot;deleteRecord(record.id)&quot; class=&quot;text-red-500&quot;&gt;刪除&lt;/button&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
  </div>

</template>

<script setup>
import {ref , computed , onMounted , watch} from 'vue'

const newRecord = ref({
    date: '',
    weight: null,
})

const records = ref([])

//初始化資料
onMounted(()=> {
    const saved = localStorage.getItem('weight-records')
    if (saved){
        records.value = JSON.parse(saved)
    }
})

// 監看資料變化自動存入 localStorage
watch(records, (newVal) => {
    localStorage.setItem('weight-records',JSON.stringify(newVal))},{deep: true})

const addRecord = () => {
    if(!newRecord.value.date || !newRecord.value.weight) return
    records.value.push({
        id: Date.now(),
        date: newRecord.value.date,
        weight: newRecord.value.weight,
    })
    newRecord.value = { date: '', weight: null}
}

const deleteRecord = (id) =>{
    records.value = records.value.filter(r=> r.id !== id)
}

const sortedRecords = computed(()=> {
    return [...records.value].sort((a,b) => new Date(a.date) - new Date(b.date))
})
</script>